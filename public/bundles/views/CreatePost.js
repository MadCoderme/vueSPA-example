import {defineComponent,openBlock,createBlock,Transition,withCtx,createElementVNode,pushScopeId,popScopeId,createTextVNode,normalizeClass,ref,createElementBlock,Fragment,withDirectives,createVNode,vShow,hasInjectionContext,inject,markRaw,watch,reactive,effectScope,isRef,isReactive,toRaw,getCurrentScope,onScopeDispose,toRefs,computed,nextTick,h,unref,provide,createStaticVNode,normalizeStyle,setBlockTracking,toDisplayString}from'vue';function _mergeNamespaces(n, m){m.forEach(function(e){e&&typeof e!=='string'&&!Array.isArray(e)&&Object.keys(e).forEach(function(k){if(k!=='default'&&!(k in n)){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})});return Object.freeze(n);}function styleInject(e,t){void 0===t&&(t={});var d=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===d&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e));}}var css_248z$3=".avatar {\n    width: 42px;\n    height: 42px;\n    border-radius: 50%;\n    -o-object-fit: cover;\n       object-fit: cover;\n    border: 2px solid var(--color-primary);\n}\n.avatar-small {\n    width: 35px;\n    height: 35px;\n    border-radius: 25px;\n    -o-object-fit: cover;\n       object-fit: cover;\n    border: 2px solid var(--color-primary);\n}\n.userinfo {\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-flex-direction: row;\n        -ms-flex-direction: row;\n            flex-direction: row;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.username {\n    font-size: 18px;\n    color: white;\n    font-weight: bold;\n    margin-left: 15px;\n    margin-right: 10px;\n}\n.username-small {\n    font-size: 16px;\n    color: white;\n    font-weight: bold;\n    margin-left: 15px;\n    margin-right: 10px;\n}\n@media (max-width: 480px) {\n    .username {\n        font-size: 16px;\n    }\n    .avatar {\n        width: 35px;\n        height: 35px;\n    }\n    .post-buttons > button > svg {\n        height: 25px !important;\n        width: 25px !important;\n    }\n    .post-more-options > svg {\n        height: 18px !important;\n    }\n}\n.btn-primary {\n    border: 0px;\n    background-color: var(--c-secondary);\n    padding: 10px;\n    padding-left: 25px;\n    padding-right: 25px;\n    border-radius: 10px;\n    font-size: 16px;\n    cursor: pointer;\n}\n.btn-secondary {\n    border: 1px solid var(--c-secondary);\n    background: transparent;\n    color: white;\n    padding: 10px;\n    padding-left: 25px;\n    padding-right: 25px;\n    border-radius: 10px;\n    font-size: 16px;\n    cursor: pointer;\n}\n.btn-primary:active, .btn-secondary:active {\n    -webkit-transform: scale(0.95);\n            transform: scale(0.95);\n    transition: all 0.1s cubic-bezier(0.17, 0.89, 0.24, 1.11);\n}\n.rounded {\n    border-radius: 20px;\n}\n.btn-small {\n    padding: 6px;\n    padding-left: 18px;\n    padding-right: 18px;\n}\n.close-btn {\n    background: var(--color-background-soft);\n    border: 0px;\n    margin-left: 5%;\n    margin-top: 20px;\n    padding: 5px;\n    padding-bottom: 4px;\n    border-radius: 10px;\n}\n.loader {\n    width: 48px;\n    height: 48px;\n    border: 5px solid var(--c-divider-dark-1);\n    border-top-color: var(--c-secondary);\n    border-radius: 50%;\n    display: inline-block;\n    box-sizing: border-box;\n    -webkit-animation: rotation 1s cubic-bezier(0.525, 0.005, 0.500, 0.890) infinite;\n            animation: rotation 1s cubic-bezier(0.525, 0.005, 0.500, 0.890) infinite;\n}\n@-webkit-keyframes rotation {\n    0% {\n        -webkit-transform: rotate(0deg);\n                transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n                transform: rotate(360deg);\n    }\n}\n@keyframes rotation {\n    0% {\n        -webkit-transform: rotate(0deg);\n                transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n                transform: rotate(360deg);\n    }\n}\n.container {\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-flex-direction: column;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center;\n    padding-top: 20px;\n    padding-bottom: var(--bottom-menu-height);\n}";styleInject(css_248z$3);const _withScopeId$2=e=>(pushScopeId("data-v-4659f920"),e=e(),popScopeId(),e),_hoisted_1$2=_withScopeId$2((()=>createElementVNode("h3",null,[createElementVNode("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 8.33329C2.5 5.19079 2.5 3.61913 3.47667 2.64329C4.4525 1.66663 6.02417 1.66663 9.16667 1.66663H10.8333C13.9758 1.66663 15.5475 1.66663 16.5233 2.64329C17.5 3.61913 17.5 5.19079 17.5 8.33329V11.6666C17.5 14.8091 17.5 16.3808 16.5233 17.3566C15.5475 18.3333 13.9758 18.3333 10.8333 18.3333H9.16667C6.02417 18.3333 4.4525 18.3333 3.47667 17.3566C2.5 16.3808 2.5 14.8091 2.5 11.6666V8.33329ZM5 9.99996C5 8.82163 5 8.23246 5.36667 7.86663C5.73167 7.49996 6.32083 7.49996 7.5 7.49996H12.5C13.6783 7.49996 14.2675 7.49996 14.6333 7.86663C15 8.23246 15 8.82163 15 9.99996V13.3333C15 14.5116 15 15.1008 14.6333 15.4666C14.2675 15.8333 13.6783 15.8333 12.5 15.8333H7.5C6.32167 15.8333 5.7325 15.8333 5.36667 15.4666C5 15.1016 5 14.5125 5 13.3333V9.99996ZM5.83333 4.37496C5.66757 4.37496 5.5086 4.44081 5.39139 4.55802C5.27418 4.67523 5.20833 4.8342 5.20833 4.99996C5.20833 5.16572 5.27418 5.32469 5.39139 5.4419C5.5086 5.55911 5.66757 5.62496 5.83333 5.62496H10C10.1658 5.62496 10.3247 5.55911 10.4419 5.4419C10.5592 5.32469 10.625 5.16572 10.625 4.99996C10.625 4.8342 10.5592 4.67523 10.4419 4.55802C10.3247 4.44081 10.1658 4.37496 10 4.37496H5.83333Z",fill:"#A3F7BF","fill-opacity":"0.8"})]),createTextVNode(" Feeds ")],-1))),_hoisted_2$2=_withScopeId$2((()=>createElementVNode("button",{class:"new-btn"},[createElementVNode("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("path",{d:"M11 12H3M16 6H3M16 18H3M18 9V15M21 12H15",stroke:"#A3F7BF","stroke-opacity":"0.8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))),_hoisted_3$1=_withScopeId$2((()=>createElementVNode("p",{style:{color:"#A3F7BF"}},[createElementVNode("span",{class:normalizeClass(["dot-fill"])}),createTextVNode(" Home ")],-1))),_hoisted_4$1=_withScopeId$2((()=>createElementVNode("p",null,[createElementVNode("span",{class:normalizeClass(["dot"])}),createTextVNode(" Following ")],-1))),_hoisted_5$1=_withScopeId$2((()=>createElementVNode("p",null,[createElementVNode("span",{class:normalizeClass(["dot"])}),createTextVNode(" Demo Feed 1 ")],-1))),_hoisted_6$1=_withScopeId$2((()=>createElementVNode("p",null,[createElementVNode("span",{class:normalizeClass(["dot"])}),createTextVNode(" Demo Feed 2 ")],-1))),_hoisted_7$1=_withScopeId$2((()=>createElementVNode("br",null,null,-1))),_hoisted_8$1=_withScopeId$2((()=>createElementVNode("h3",null,[createElementVNode("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("path",{d:"M0 6.23702C0.000305196 7.68489 0.502143 9.08787 1.42001 10.2069C2.33788 11.326 3.61499 12.0918 5.03375 12.3741C5.19342 10.6123 5.92483 8.95122 7.11625 7.64459C6.63697 7.46715 6.11488 7.44098 5.62029 7.56961C5.12569 7.69824 4.68236 7.97549 4.35 8.36402C4.29665 8.42646 4.23154 8.47777 4.15838 8.51502C4.08522 8.55226 4.00545 8.57473 3.92361 8.58111C3.84178 8.58751 3.75949 8.5777 3.68145 8.55226C3.6034 8.52682 3.53113 8.48624 3.46875 8.43284C3.40637 8.37944 3.35511 8.31426 3.3179 8.24103C3.28069 8.1678 3.25825 8.08796 3.25186 8.00605C3.24548 7.92414 3.25527 7.84177 3.28069 7.76365C3.30611 7.68553 3.34665 7.61319 3.4 7.55076C3.96599 6.88858 4.74452 6.44416 5.60208 6.29372C6.45963 6.14327 7.34276 6.29619 8.1 6.72623C9.33147 5.7537 10.819 5.16074 12.3812 5.01962C12.0747 3.50007 11.2156 2.14849 9.97041 1.22668C8.72522 0.30487 7.18254 -0.12156 5.6412 0.029993C4.09987 0.181546 2.66958 0.900296 1.62739 2.04702C0.585204 3.19374 0.00529622 4.68681 0 6.23702ZM5.3125 4.36025C5.3125 4.48348 5.28825 4.6055 5.24114 4.71935C5.19402 4.8332 5.12497 4.93665 5.03791 5.02378C4.95086 5.11092 4.84751 5.18004 4.73377 5.2272C4.62002 5.27436 4.49811 5.29863 4.375 5.29863C4.25189 5.29863 4.12998 5.27436 4.01623 5.2272C3.90249 5.18004 3.79914 5.11092 3.71209 5.02378C3.62503 4.93665 3.55598 4.8332 3.50886 4.71935C3.46175 4.6055 3.4375 4.48348 3.4375 4.36025C3.4375 4.11137 3.53627 3.87269 3.71209 3.69671C3.8879 3.52073 4.12636 3.42186 4.375 3.42186C4.62364 3.42186 4.8621 3.52073 5.03791 3.69671C5.21373 3.87269 5.3125 4.11137 5.3125 4.36025ZM9.0625 4.36025C9.0625 4.60912 8.96373 4.8478 8.78791 5.02378C8.6121 5.19977 8.37364 5.29863 8.125 5.29863C7.87636 5.29863 7.6379 5.19977 7.46209 5.02378C7.28627 4.8478 7.1875 4.60912 7.1875 4.36025C7.1875 4.11137 7.28627 3.87269 7.46209 3.69671C7.6379 3.52073 7.87636 3.42186 8.125 3.42186C8.37364 3.42186 8.6121 3.52073 8.78791 3.69671C8.96373 3.87269 9.0625 4.11137 9.0625 4.36025ZM20 13.1185C20 14.9436 19.2757 16.6939 17.9864 17.9845C16.697 19.275 14.9484 20 13.125 20C11.3016 20 9.55295 19.275 8.26364 17.9845C6.97433 16.6939 6.25 14.9436 6.25 13.1185C6.25 11.2934 6.97433 9.54309 8.26364 8.25256C9.55295 6.96203 11.3016 6.23702 13.125 6.23702C14.9484 6.23702 16.697 6.96203 17.9864 8.25256C19.2757 9.54309 20 11.2934 20 13.1185ZM11.5625 11.8673C11.5625 11.6185 11.4637 11.3798 11.2879 11.2038C11.1121 11.0278 10.8736 10.9289 10.625 10.9289C10.3764 10.9289 10.1379 11.0278 9.96209 11.2038C9.78627 11.3798 9.6875 11.6185 9.6875 11.8673C9.6875 12.1162 9.78627 12.3549 9.96209 12.5309C10.1379 12.7068 10.3764 12.8057 10.625 12.8057C10.8736 12.8057 11.1121 12.7068 11.2879 12.5309C11.4637 12.3549 11.5625 12.1162 11.5625 11.8673ZM16.3812 15.0829C16.3189 15.0295 16.2466 14.9889 16.1686 14.9634C16.0905 14.938 16.0082 14.9282 15.9264 14.9346C15.8446 14.941 15.7648 14.9634 15.6916 15.0007C15.6185 15.0379 15.5533 15.0892 15.5 15.1517C15.2068 15.4945 14.843 15.7697 14.4335 15.9586C14.024 16.1474 13.5786 16.2454 13.1277 16.2457C12.6769 16.2461 12.2313 16.1488 11.8215 15.9606C11.4118 15.7724 11.0475 15.4978 10.7537 15.1554C10.7002 15.0931 10.635 15.0419 10.5617 15.0048C10.4884 14.9677 10.4086 14.9454 10.3267 14.9391C10.2448 14.9329 10.1625 14.9429 10.0844 14.9685C10.0064 14.9942 9.93417 15.0349 9.87187 15.0885C9.80958 15.1421 9.75843 15.2074 9.72136 15.2807C9.68428 15.3541 9.66201 15.434 9.6558 15.516C9.64958 15.5979 9.65956 15.6803 9.68517 15.7584C9.71077 15.8366 9.75149 15.9088 9.805 15.9712C10.2161 16.4509 10.726 16.8358 11.2998 17.0995C11.8736 17.3632 12.4976 17.4994 13.1289 17.4989C13.7603 17.4983 14.3841 17.3608 14.9574 17.0961C15.5306 16.8313 16.0398 16.4454 16.45 15.9649C16.5034 15.9025 16.5439 15.8302 16.5693 15.752C16.5947 15.6739 16.6045 15.5916 16.5982 15.5096C16.5918 15.4277 16.5693 15.3479 16.5321 15.2747C16.4949 15.2014 16.4436 15.1363 16.3812 15.0829ZM15.625 12.8057C15.8736 12.8057 16.1121 12.7068 16.2879 12.5309C16.4637 12.3549 16.5625 12.1162 16.5625 11.8673C16.5625 11.6185 16.4637 11.3798 16.2879 11.2038C16.1121 11.0278 15.8736 10.9289 15.625 10.9289C15.3764 10.9289 15.1379 11.0278 14.9621 11.2038C14.7863 11.3798 14.6875 11.6185 14.6875 11.8673C14.6875 12.1162 14.7863 12.3549 14.9621 12.5309C15.1379 12.7068 15.3764 12.8057 15.625 12.8057Z",fill:"#A3F7BF","fill-opacity":"0.8"})]),createTextVNode(" Moods ")],-1))),_hoisted_9$1=_withScopeId$2((()=>createElementVNode("p",null,[createElementVNode("span",{class:normalizeClass(["dot"])}),createTextVNode(" Positive ")],-1))),_hoisted_10$1=_withScopeId$2((()=>createElementVNode("p",null,[createElementVNode("span",{class:normalizeClass(["dot"])}),createTextVNode(" Motivational ")],-1))),_hoisted_11$1=_withScopeId$2((()=>createElementVNode("p",null,[createElementVNode("span",{class:"dot",style:{backgroundColor:"#A3F7BF"}}),createTextVNode(" Neutral ")],-1))),_hoisted_12$1=[_hoisted_1$2,_hoisted_2$2,_hoisted_3$1,_hoisted_4$1,_hoisted_5$1,_hoisted_6$1,_hoisted_7$1,_hoisted_8$1,_hoisted_9$1,_hoisted_10$1,_hoisted_11$1];var script$2 = defineComponent({__name:"FeedOptions",props:{hide:{type:Function,required:!0}},setup(e){const t=e;return (e,o)=>(openBlock(),createBlock(Transition,{name:"fadeIn"},{default:withCtx((()=>[createElementVNode("div",{class:"wrapper",onClick:o[1]||(o[1]=e=>t.hide())},[createElementVNode("div",{class:"popup",onClick:o[0]||(o[0]=e=>e.stopPropagation())},[..._hoisted_12$1])])])),_:1}))}});
var css_248z$2="\n.fadeIn-enter-active[data-v-4659f920] {\n  transition: all 0.5s ease-in;\n  opacity: 1;\n  -webkit-backdrop-filter: blur(2px);\n          backdrop-filter: blur(2px);\n}\n.fadeIn-enter-to[data-v-4659f920] {\n  transition: all 0.5s ease-in;\n  opacity: 1;\n  -webkit-backdrop-filter: blur(2px);\n          backdrop-filter: blur(2px);\n}\n.fadeIn-leave-active[data-v-4659f920] {\n  transition: all 0.3s ease-out;\n  opacity: 0;\n}\n.wrapper[data-v-4659f920] {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    z-index: 100;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-justify-content: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-backdrop-filter: blur(2px);\n            backdrop-filter: blur(2px);\n}\n.popup[data-v-4659f920] {\n    width: 90%;\n    padding: 25px;\n    background-color: var(--c-black-mute);\n    border-radius: 20px;\n}\n.popup > h3[data-v-4659f920] {\n  color: white;\n  font-weight: bold;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-bottom: 10px;\n}\n.popup > h3 > svg[data-v-4659f920] {\n  margin-right: 6px;\n}\n.popup > p[data-v-4659f920] {\n  color: white;\n  font-size: 16px;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  cursor: pointer;\n}\n.new-btn[data-v-4659f920] {\n  float: right;\n  margin-top: -30px;\n  background: transparent;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n.new-btn[data-v-4659f920]:hover {\n  background: var(--color-background);\n}\n.dot-fill[data-v-4659f920] {\n  height: 15px;\n  width: 15px;\n  background-color: var(--c-primary);\n  border-radius: 50%;\n  display: inline-block;\n  margin-right: 10px;\n}\n.dot[data-v-4659f920] {\n  height: 15px;\n  width: 15px;\n  border: 1px solid var(--c-primary);\n  border-radius: 50%;\n  display: inline-block;\n  margin-right: 10px;\n}\n";styleInject(css_248z$2);script$2.__scopeId="data-v-4659f920",script$2.__file="src/components/FeedOptions.vue";const _withScopeId$1=e=>(pushScopeId("data-v-4fab8702"),e=e(),popScopeId(),e),_hoisted_1$1={class:"header"},_hoisted_2$1=_withScopeId$1((()=>createElementVNode("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("path",{d:"M11.3 14.3L8.7 11.7C8.38333 11.3833 8.31266 11.021 8.488 10.613C8.66333 10.205 8.97566 10.0007 9.425 10H14.575C15.025 10 15.3377 10.2043 15.513 10.613C15.6883 11.0217 15.6173 11.384 15.3 11.7L12.7 14.3C12.6 14.4 12.4917 14.475 12.375 14.525C12.2583 14.575 12.1333 14.6 12 14.6C11.8667 14.6 11.7417 14.575 11.625 14.525C11.5083 14.475 11.4 14.4 11.3 14.3Z",fill:"#A3F7BF"})],-1)));var script$1 = defineComponent({__name:"Header",setup(e){const o=ref(!1);return (e,t)=>(openBlock(),createElementBlock(Fragment,null,[createElementVNode("div",_hoisted_1$1,[createElementVNode("p",{onClick:t[0]||(t[0]=e=>o.value=!o.value)},[createTextVNode(" Home "),_hoisted_2$1])]),withDirectives(createVNode(script$2,{hide:()=>o.value=!1},null,8,["hide"]),[[vShow,o.value]])],64))}});
var css_248z$1="\n.header[data-v-4fab8702] {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        right: 0px;\n        width: 100%;\n        display: -webkit-flex;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-flex-direction: row;\n            -ms-flex-direction: row;\n                flex-direction: row;\n        -webkit-justify-content: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n        -webkit-align-items: center;\n            -ms-flex-align: center;\n                align-items: center;\n        background-color: var(--color-background);\n        padding-top: 2%;\n        padding-bottom: 2%;\n}\n.header > p[data-v-4fab8702] {\n        display: -webkit-flex;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-align-items: center;\n            -ms-flex-align: center;\n                align-items: center;\n        color: var(--c-primary);\n        cursor: pointer;\n}\n";styleInject(css_248z$1);script$1.__scopeId="data-v-4fab8702",script$1.__file="src/components/template/Header.vue";/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */
let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var MutationType;!function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function";}(MutationType||(MutationType={}));const USE_DEVTOOLS=!1;const _navigator="object"==typeof navigator?navigator:{userAgent:""};(()=>/Macintosh/.test(_navigator.userAgent)&&/AppleWebKit/.test(_navigator.userAgent)&&!/Safari/.test(_navigator.userAgent))();const noop$3=()=>{};function addSubscription(e,t,o,n=noop$3){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n());};return !o&&getCurrentScope()&&onScopeDispose(i),i}function triggerSubscriptions(e,...t){e.slice().forEach((e=>{e(...t);}));}const fallbackRunWithContext=e=>e();function mergeReactiveObjects(e,t){e instanceof Map&&t instanceof Map&&t.forEach(((t,o)=>e.set(o,t))),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const o in t){if(!t.hasOwnProperty(o))continue;const n=t[o],i=e[o];isPlainObject(i)&&isPlainObject(n)&&e.hasOwnProperty(o)&&!isRef(n)&&!isReactive(n)?e[o]=mergeReactiveObjects(i,n):e[o]=n;}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return !isPlainObject(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(e){return !(!isRef(e)||!e.effect)}function createOptionsStore(e,t,o,n){const{state:i,actions:a,getters:s}=t,r=o.state.value[e];let c;return c=createSetupStore(e,(function(){r||(o.state.value[e]=i?i():{});const t=toRefs(o.state.value[e]);return assign$1(t,a,Object.keys(s||{}).reduce(((t,n)=>(t[n]=markRaw(computed((()=>{setActivePinia(o);const t=o._s.get(e);return s[n].call(t,t)}))),t)),{}))}),t,o,n,!0),c}function createSetupStore(e,t,o={},n,i,a){let s;const r=assign$1({actions:{}},o);const c={deep:!0};let l,p;let u,d=[],f=[];const g=n.state.value[e];a||g||(n.state.value[e]={});const y=ref({});let S;function m(t){let o;l=p=!1,"function"==typeof t?(t(n.state.value[e]),o={type:MutationType.patchFunction,storeId:e,events:u}):(mergeReactiveObjects(n.state.value[e],t),o={type:MutationType.patchObject,payload:t,storeId:e,events:u});const i=S=Symbol();nextTick().then((()=>{S===i&&(l=!0);})),p=!0,triggerSubscriptions(d,o,n.state.value[e]);}const h=a?function(){const{state:e}=o,t=e?e():{};this.$patch((e=>{assign$1(e,t);}));}:noop$3;function b(t,o){return function(){setActivePinia(n);const i=Array.from(arguments),a=[],s=[];let r;triggerSubscriptions(f,{args:i,name:t,store:I,after:function(e){a.push(e);},onError:function(e){s.push(e);}});try{r=o.apply(this&&this.$id===e?this:I,i);}catch(e){throw triggerSubscriptions(s,e),e}return r instanceof Promise?r.then((e=>(triggerSubscriptions(a,e),e))).catch((e=>(triggerSubscriptions(s,e),Promise.reject(e)))):(triggerSubscriptions(a,r),r)}}markRaw({actions:{},getters:{},state:[],hotState:y});const _={_p:n,$id:e,$onAction:addSubscription.bind(null,f),$patch:m,$reset:h,$subscribe(t,o={}){const i=addSubscription(d,t,o.detached,(()=>a())),a=s.run((()=>watch((()=>n.state.value[e]),(n=>{("sync"===o.flush?p:l)&&t({storeId:e,type:MutationType.direct,events:u},n);}),assign$1({},c,o))));return i},$dispose:function(){s.stop(),d=[],f=[],n._s.delete(e);}};const I=reactive(_);n._s.set(e,I);const O=(n._a&&n._a.runWithContext||fallbackRunWithContext)((()=>n._e.run((()=>(s=effectScope()).run(t)))));for(const t in O){const o=O[t];if(isRef(o)&&!isComputed(o)||isReactive(o))a||(g&&shouldHydrate(o)&&(isRef(o)?o.value=g[t]:mergeReactiveObjects(o,g[t])),n.state.value[e][t]=o);else if("function"==typeof o){const e=b(t,o);O[t]=e,r.actions[t]=o;}else ;}if((assign$1(I,O),assign$1(toRaw(I),O)),Object.defineProperty(I,"$state",{get:()=>n.state.value[e],set:e=>{m((t=>{assign$1(t,e);}));}}),USE_DEVTOOLS);return n._p.forEach((e=>{assign$1(I,s.run((()=>e({store:I,app:n._a,pinia:n,options:r}))));})),g&&a&&o.hydrate&&o.hydrate(I.$state,g),l=!0,p=!0,I}function defineStore(e,t,o){let n,i;const a="function"==typeof t;function s(e,o){const s=hasInjectionContext();(e=e||(s?inject(piniaSymbol,null):null))&&setActivePinia(e),(e=activePinia)._s.has(n)||(a?createSetupStore(n,t,i,e):createOptionsStore(n,i,e));const r=e._s.get(n);return r}return "string"==typeof e?(n=e,i=a?o:t):(i=e,n=e.id),s.$id=n,s}const resolveFetch$3=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(function(){return browser$2}).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)};class FunctionsError extends Error{constructor(r,t="FunctionsError",o){super(r),this.name=t,this.context=o;}}class FunctionsFetchError extends FunctionsError{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r);}}class FunctionsRelayError extends FunctionsError{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r);}}class FunctionsHttpError extends FunctionsError{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r);}}var __awaiter$a=undefined&&undefined.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{c(n.next(t));}catch(t){i(t);}}function s(t){try{c(n.throw(t));}catch(t){i(t);}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}c((n=n.apply(t,e||[])).next());}))};class FunctionsClient{constructor(t,{headers:e={},customFetch:r}={}){this.url=t,this.headers=e,this.fetch=resolveFetch$3(r);}setAuth(t){this.headers.Authorization=`Bearer ${t}`;}invoke(t,e={}){var r;return __awaiter$a(this,void 0,void 0,(function*(){try{const{headers:n,method:o,body:i}=e;let a,s={};i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",a=i):"string"==typeof i?(s["Content-Type"]="text/plain",a=i):"undefined"!=typeof FormData&&i instanceof FormData?a=i:(s["Content-Type"]="application/json",a=JSON.stringify(i)));const c=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),n),body:a}).catch((t=>{throw new FunctionsFetchError(t)})),h=c.headers.get("x-relay-error");if(h&&"true"===h)throw new FunctionsRelayError(c);if(!c.ok)throw new FunctionsHttpError(c);let l,u=(null!==(r=c.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return l="application/json"===u?yield c.json():"application/octet-stream"===u?yield c.blob():"multipart/form-data"===u?yield c.formData():yield c.text(),{data:l,error:null}}catch(t){return {data:null,error:t}}}))}}var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

function getDefaultExportFromCjs (x) {
	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
}var browser$3 = {exports: {}};!function(e,o){var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==commonjsGlobal)return commonjsGlobal;throw new Error("unable to locate global object")}();e.exports=o=r.fetch,r.fetch&&(o.default=r.fetch.bind(r)),o.Headers=r.Headers,o.Request=r.Request,o.Response=r.Response;}(browser$3,browser$3.exports);var browserExports=browser$3.exports;var nodeFetch = getDefaultExportFromCjs(browserExports);var browser$2=/*#__PURE__*/_mergeNamespaces({__proto__:null,default:nodeFetch},[browserExports]);class PostgrestBuilder{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:"undefined"==typeof fetch?this.fetch=nodeFetch:this.fetch=fetch;}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,e){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0, this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async t=>{var e,s,h;let r=null,i=null,o=null,n=t.status,l=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?e:JSON.parse(e));}const h=null===(e=this.headers.Prefer)||void 0===e?void 0:e.match(/count=(exact|planned|estimated)/),a=null===(s=t.headers.get("content-range"))||void 0===s?void 0:s.split("/");h&&a&&a.length>1&&(o=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(r={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,o=null,n=406,l="Not Acceptable"):i=1===i.length?i[0]:null);}else {const e=await t.text();try{r=JSON.parse(e),Array.isArray(r)&&404===t.status&&(i=[],r=null,n=200,l="OK");}catch(s){404===t.status&&""===e?(n=204,l="No Content"):r={message:e};}if(r&&this.isMaybeSingle&&(null===(h=null==r?void 0:r.details)||void 0===h?void 0:h.includes("0 rows"))&&(r=null,n=200,l="OK"),r&&this.shouldThrowOnError)throw r}return {error:r,data:i,count:o,status:n,statusText:l}}));return this.shouldThrowOnError||(s=s.catch((t=>{var e,s,h;return {error:{message:`${null!==(e=null==t?void 0:t.name)&&void 0!==e?e:"FetchError"}: ${null==t?void 0:t.message}`,details:`${null!==(s=null==t?void 0:t.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(h=null==t?void 0:t.code)&&void 0!==h?h:""}`},data:null,count:null,status:0,statusText:""}}))),s.then(t,e)}}class PostgrestTransformBuilder extends PostgrestBuilder{select(e){let t=!1;const s=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r}={}){const i=r?`${r}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const s=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:s}={}){const r=void 0===s?"offset":`${s}.offset`,i=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return "GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),n=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${n}"; options=${l};`,this}rollback(){var e;return (null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class PostgrestFilterBuilder extends PostgrestTransformBuilder{eq(r,s){return this.url.searchParams.append(r,`eq.${s}`),this}neq(r,s){return this.url.searchParams.append(r,`neq.${s}`),this}gt(r,s){return this.url.searchParams.append(r,`gt.${s}`),this}gte(r,s){return this.url.searchParams.append(r,`gte.${s}`),this}lt(r,s){return this.url.searchParams.append(r,`lt.${s}`),this}lte(r,s){return this.url.searchParams.append(r,`lte.${s}`),this}like(r,s){return this.url.searchParams.append(r,`like.${s}`),this}likeAllOf(r,s){return this.url.searchParams.append(r,`like(all).{${s.join(",")}}`),this}likeAnyOf(r,s){return this.url.searchParams.append(r,`like(any).{${s.join(",")}}`),this}ilike(r,s){return this.url.searchParams.append(r,`ilike.${s}`),this}ilikeAllOf(r,s){return this.url.searchParams.append(r,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(r,s){return this.url.searchParams.append(r,`ilike(any).{${s.join(",")}}`),this}is(r,s){return this.url.searchParams.append(r,`is.${s}`),this}in(r,s){const a=s.map((r=>"string"==typeof r&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`)).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}contains(r,s){return "string"==typeof s?this.url.searchParams.append(r,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(r,`cs.{${s.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(s)}`),this}containedBy(r,s){return "string"==typeof s?this.url.searchParams.append(r,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(r,`cd.{${s.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(s)}`),this}rangeGt(r,s){return this.url.searchParams.append(r,`sr.${s}`),this}rangeGte(r,s){return this.url.searchParams.append(r,`nxl.${s}`),this}rangeLt(r,s){return this.url.searchParams.append(r,`sl.${s}`),this}rangeLte(r,s){return this.url.searchParams.append(r,`nxr.${s}`),this}rangeAdjacent(r,s){return this.url.searchParams.append(r,`adj.${s}`),this}overlaps(r,s){return "string"==typeof s?this.url.searchParams.append(r,`ov.${s}`):this.url.searchParams.append(r,`ov.{${s.join(",")}}`),this}textSearch(r,s,{config:a,type:e}={}){let t="";"plain"===e?t="pl":"phrase"===e?t="ph":"websearch"===e&&(t="w");const i=void 0===a?"":`(${a})`;return this.url.searchParams.append(r,`${t}fts${i}.${s}`),this}match(r){return Object.entries(r).forEach((([r,s])=>{this.url.searchParams.append(r,`eq.${s}`);})),this}not(r,s,a){return this.url.searchParams.append(r,`not.${s}.${a}`),this}or(r,{foreignTable:s}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${r})`),this}filter(r,s,a){return this.url.searchParams.append(r,`${s}.${a}`),this}}class PostgrestQueryBuilder{constructor(e,{headers:s={},schema:t,fetch:r}){this.url=e,this.headers=s,this.schema=t,this.fetch=r;}select(e,{head:s=!1,count:t}={}){const r=s?"HEAD":"GET";let h=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!h?"":('"'===e&&(h=!h),e))).join("");return this.url.searchParams.set("select",i),t&&(this.headers.Prefer=`count=${t}`),new PostgrestFilterBuilder({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:t=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),t||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const s=e.reduce(((e,s)=>e.concat(Object.keys(s))),[]);if(s.length>0){const e=[...new Set(s)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","));}}return new PostgrestFilterBuilder({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:t=!1,count:r,defaultToNull:h=!0}={}){const i=[`resolution=${t?"ignore":"merge"}-duplicates`];if(void 0!==s&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),h||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const s=e.reduce(((e,s)=>e.concat(Object.keys(s))),[]);if(s.length>0){const e=[...new Set(s)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","));}}return new PostgrestFilterBuilder({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const t=[];return this.headers.Prefer&&t.push(this.headers.Prefer),s&&t.push(`count=${s}`),this.headers.Prefer=t.join(","),new PostgrestFilterBuilder({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new PostgrestFilterBuilder({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const version$6="1.8.5";const DEFAULT_HEADERS$4={"X-Client-Info":`postgrest-js/${version$6}`};class PostgrestClient{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$4),t),this.schemaName=s,this.fetch=r;}from(e){const t=new URL(`${this.url}/${e}`);return new PostgrestQueryBuilder(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new PostgrestClient(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,count:r}={}){let h;const c=new URL(`${this.url}/rpc/${e}`);let i;s?(h="HEAD",Object.entries(t).forEach((([e,t])=>{c.searchParams.append(e,`${t}`);}))):(h="POST",i=t);const a=Object.assign({},this.headers);return r&&(a.Prefer=`count=${r}`),new PostgrestFilterBuilder({method:h,url:c,headers:a,schema:this.schemaName,body:i,fetch:this.fetch,allowEmpty:!1})}}var global$1,hasRequiredGlobal;function requireGlobal(){if(hasRequiredGlobal)return global$1;hasRequiredGlobal=1;var e=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};return global$1=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0});}catch(r){return e()}try{return __global__||e()}finally{delete Object.prototype.__global__;}}()}var name="websocket";var description="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.";var keywords=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"];var author="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)";var contributors=["IÃ±aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"];var version$5="1.0.34";var repository={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"};var homepage="https://github.com/theturtle32/WebSocket-Node";var engines={node:">=4.0.0"};var dependencies={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"};var devDependencies={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"};var config={verbose:!1};var scripts={test:"tape test/unit/*.js",gulp:"gulp"};var main="index";var directories={lib:"./lib"};var browser$1="lib/browser.js";var license="Apache-2.0";var require$$0 = {name:name,description:description,keywords:keywords,author:author,contributors:contributors,version:version$5,repository:repository,homepage:homepage,engines:engines,dependencies:dependencies,devDependencies:devDependencies,config:config,scripts:scripts,main:main,directories:directories,browser:browser$1,license:license};
var version$4=require$$0.version;getDefaultExportFromCjs(version$4);var _globalThis;if("object"==typeof globalThis)_globalThis=globalThis;else try{_globalThis=requireGlobal();}catch(e){}finally{if(_globalThis||"undefined"==typeof window||(_globalThis=window),!_globalThis)throw new Error("Could not determine global this")}var NativeWebSocket=_globalThis.WebSocket||_globalThis.MozWebSocket,websocket_version=version$4;function W3CWebSocket(e,o){return o?new NativeWebSocket(e,o):new NativeWebSocket(e)}NativeWebSocket&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(W3CWebSocket,e,{get:function(){return NativeWebSocket[e]}});}));var browser={w3cwebsocket:NativeWebSocket?W3CWebSocket:null,version:websocket_version};getDefaultExportFromCjs(browser);const version$3="2.8.4";const DEFAULT_HEADERS$3={"X-Client-Info":`realtime-js/${version$3}`};const VSN="1.0.0";const DEFAULT_TIMEOUT=1e4;const WS_CLOSE_NORMAL=1e3;var SOCKET_STATES;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed";}(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;!function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving";}(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;!function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token";}(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;!function(e){e.websocket="websocket";}(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;!function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed";}(CONNECTION_STATE||(CONNECTION_STATE={}));class Timer{constructor(t,i){this.callback=t,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=i;}reset(){this.tries=0,clearTimeout(this.timer);}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback();}),this.timerCalc(this.tries+1));}}class Serializer{constructor(){this.HEADER_LENGTH=1;}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const c=t.getUint8(1),o=t.getUint8(2);let s=this.HEADER_LENGTH+2;const d=r.decode(e.slice(s,s+c));s+=c;const n=r.decode(e.slice(s,s+o));s+=o;return {ref:null,topic:d,event:n,payload:JSON.parse(r.decode(e.slice(s,e.byteLength)))}}}class Push{constructor(e,t,s={},i=DEFAULT_TIMEOUT){this.channel=e,this.event=t,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null;}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send();}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}));}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e);}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e);})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{});}),this.timeout);}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t});}destroy(){this._cancelRefEvent(),this._cancelTimeout();}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{});}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0;}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)));}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var REALTIME_PRESENCE_LISTEN_EVENTS;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave";}(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const t=(null==n?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},(e=>{const{onJoin:n,onLeave:t,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,e,n,t),this.pendingDiffs.forEach((e=>{this.state=RealtimePresence.syncDiff(this.state,e,n,t);})),this.pendingDiffs=[],s();})),this.channel._on(t.diff,{},(e=>{const{onJoin:n,onLeave:t,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=RealtimePresence.syncDiff(this.state,e,n,t),s());})),this.onJoin(((e,n,t)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:n,newPresences:t});})),this.onLeave(((e,n,t)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:n,leftPresences:t});})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"});}));}static syncState(e,n,t,s){const i=this.cloneDeep(e),r=this.transformState(n),c={},a={};return this.map(i,((e,n)=>{r[e]||(a[e]=n);})),this.map(r,((e,n)=>{const t=i[e];if(t){const s=n.map((e=>e.presence_ref)),i=t.map((e=>e.presence_ref)),r=n.filter((e=>i.indexOf(e.presence_ref)<0)),o=t.filter((e=>s.indexOf(e.presence_ref)<0));r.length>0&&(c[e]=r),o.length>0&&(a[e]=o);}else c[e]=n;})),this.syncDiff(i,{joins:c,leaves:a},t,s)}static syncDiff(e,n,t,s){const{joins:i,leaves:r}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return t||(t=()=>{}),s||(s=()=>{}),this.map(i,((n,s)=>{var i;const r=null!==(i=e[n])&&void 0!==i?i:[];if(e[n]=this.cloneDeep(s),r.length>0){const t=e[n].map((e=>e.presence_ref)),s=r.filter((e=>t.indexOf(e.presence_ref)<0));e[n].unshift(...s);}t(n,r,s);})),this.map(r,((n,t)=>{let i=e[n];if(!i)return;const r=t.map((e=>e.presence_ref));i=i.filter((e=>r.indexOf(e.presence_ref)<0)),e[n]=i,s(n,i,t),0===i.length&&delete e[n];})),e}static map(e,n){return Object.getOwnPropertyNames(e).map((t=>n(t,e[t])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((n,t)=>{const s=e[t];return n[t]="metas"in s?s.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):s,n}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e;}onLeave(e){this.caller.onLeave=e;}onSync(e){this.caller.onSync=e;}inPendingSyncState(){return !this.joinRef||this.joinRef!==this.channel._joinRef()}}var PostgresTypes;!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange";}(PostgresTypes||(PostgresTypes={}));const convertChangeData=(e,t,s={})=>{var r;const o=null!==(r=s.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce(((s,r)=>(s[r]=convertColumn(r,e,t,o),s)),{})};const convertColumn=(e,t,s,r)=>{const o=t.find((t=>t.name===e)),n=null==o?void 0:o.type,a=s[e];return n&&!r.includes(n)?convertCell(n,a):noop$2(a)};const convertCell=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return toArray(t,s)}switch(e){case PostgresTypes.bool:return toBoolean(t);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(t);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(t);case PostgresTypes.timestamp:return toTimestampString(t);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:default:return noop$2(t)}};const noop$2=e=>e;const toBoolean=e=>{switch(e){case"t":return !0;case"f":return !1;default:return e}};const toNumber=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e};const toJson=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e};const toArray=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const o=e.slice(1,s);try{r=JSON.parse("["+o+"]");}catch(e){r=o?o.split(","):[];}return r.map((e=>convertCell(t,e)))}return e};const toTimestampString=e=>"string"==typeof e?e.replace(" ","T"):e;var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE";}(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;!function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes";}(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;!function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR";}(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[];})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this);})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout());})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout());})),this._on(CHANNEL_EVENTS.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e);})),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=this._broadcastEndpointURL();}subscribe(e,t=this.timeout){var i,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw "tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:n}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const r={},a={broadcast:o,presence:n,postgres_changes:null!==(s=null===(i=this.bindings.postgres_changes)||void 0===i?void 0:i.map((e=>e.filter)))&&void 0!==s?s:[]};this.socket.accessToken&&(r.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},r)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var i;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const s=this.bindings.postgres_changes,o=null!==(i=null==s?void 0:s.length)&&void 0!==i?i:0,n=[];for(let i=0;i<o;i++){const o=s[i],{filter:{event:r,schema:a,table:c,filter:h}}=o,l=t&&t[i];if(!l||l.event!==r||l.schema!==a||l.table!==c||l.filter!==h)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},o),{id:l.id}));}return this.bindings.postgres_changes=n,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED");})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")));})).receive("timeout",(()=>{e&&e("TIMED_OUT");}));}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this._on(e,t,i)}async send(e,t={}){var i,s;if(this._canPush()||"broadcast"!==e.type)return new Promise((i=>{var s,o,n;const r=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(o=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===o?void 0:o.broadcast)||void 0===n?void 0:n.ack)||i("ok"),r.receive("ok",(()=>i("ok"))),r.receive("timeout",(()=>i("timed out")));}));{const{event:o,payload:n}=e,r={method:"POST",headers:{apikey:null!==(i=this.socket.accessToken)&&void 0!==i?i:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:n}]})};try{return (await this._fetchWithTimeout(this.broadcastEndpointURL,r,null!==(s=t.timeout)&&void 0!==s?s:this.timeout)).ok?"ok":"error"}catch(e){return "AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e);}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef());};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((i=>{const s=new Push(this,CHANNEL_EVENTS.leave,{},e);s.receive("ok",(()=>{t(),i("ok");})).receive("timeout",(()=>{t(),i("timed out");})).receive("error",(()=>{i("error");})),s.send(),this._canPush()||s.trigger("ok",{});}))}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,t,i){const s=new AbortController,o=setTimeout((()=>s.abort()),i),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),n}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw `tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Push(this,e,t,i);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var s,o;const n=e.toLocaleLowerCase(),{close:r,error:a,leave:c,join:h}=CHANNEL_EVENTS;if(i&&[r,a,c,h].indexOf(n)>=0&&i!==this._joinRef())return;let l=this._onMessage(n,t,i);if(t&&!l)throw "channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter((e=>{var t,i,s;return "*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(i=e.filter)||void 0===i?void 0:i.event)||void 0===s?void 0:s.toLocaleLowerCase())===n})).map((e=>e.callback(l,i))):null===(o=this.bindings[n])||void 0===o||o.filter((e=>{var i,s,o,r,a,c;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,r=null===(i=e.filter)||void 0===i?void 0:i.event;return n&&(null===(s=t.ids)||void 0===s?void 0:s.includes(n))&&("*"===r||(null==r?void 0:r.toLocaleLowerCase())===(null===(o=t.data)||void 0===o?void 0:o.type.toLocaleLowerCase()))}{const i=null===(a=null===(r=null==e?void 0:e.filter)||void 0===r?void 0:r.event)||void 0===a?void 0:a.toLocaleLowerCase();return "*"===i||i===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n})).map((e=>{if("object"==typeof l&&"ids"in l){const e=l.data,{schema:t,table:i,commit_timestamp:s,type:o,errors:n}=e,r={schema:t,table:i,commit_timestamp:s,eventType:o,new:{},old:{},errors:n};l=Object.assign(Object.assign({},r),this._getPayloadRecords(e));}e.callback(l,i);}));}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(e){return `chan_reply_${e}`}_on(e,t,i){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:i};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter((e=>{var s;return !((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===i&&RealtimeChannel.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return !1;for(const i in e)if(e[i]!==t[i])return !1;return !0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin();}_onClose(e){this._on(CHANNEL_EVENTS.close,{},e);}_onError(e){this._on(CHANNEL_EVENTS.error,{},(t=>e(t)));}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(e));}_getPayloadRecords(e){const t={new:{},old:{}};return "INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=convertChangeData(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=convertChangeData(e.columns,e.old_record)),t}}const noop$1=()=>{};class RealtimeClient{constructor(e,t){var n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=DEFAULT_HEADERS$3,this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=browser.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=noop$1,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(function(){return browser$2}).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${TRANSPORTS.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;s&&(this.accessToken=s),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Timer((async()=>{this.disconnect(),this.connect();}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch);}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)));}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset());}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n);}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}channel(e,t={config:{}}){const n=new RealtimeChannel(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:i}=e,r=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e);}));};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?r():this.sendBuffer.push(r);}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(CHANNEL_EVENTS.access_token,{access_token:e});}));}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe());}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()));}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:s,ref:i}=e;(i&&i===this.pendingHeartbeatRef||n===(null==s?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${i&&"("+i+")"||""}`,s),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(n,s,i))),this.stateChangeCallbacks.message.forEach((t=>t(e)));}));}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()));}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)));}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)));}_triggerChanError(){this.channels.forEach((e=>e._trigger(CHANNEL_EVENTS.error)));}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return `${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[]);}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(WS_CLOSE_NORMAL,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken);}}}class StorageError extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError";}}function isStorageError(r){return "object"==typeof r&&null!==r&&"__isStorageError"in r}class StorageApiError extends StorageError{constructor(r,t){super(r),this.name="StorageApiError",this.status=t;}toJSON(){return {name:this.name,message:this.message,status:this.status}}}class StorageUnknownError extends StorageError{constructor(r,t){super(r),this.name="StorageUnknownError",this.originalError=t;}}var __awaiter$9=undefined&&undefined.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e));}catch(e){r(e);}}function a(e){try{c(o.throw(e));}catch(e){r(e);}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t);}))).then(s,a);}c((o=o.apply(e,t||[])).next());}))};const resolveFetch$2=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(function(){return browser$2}).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)};const resolveResponse=()=>__awaiter$9(void 0,void 0,void 0,(function*(){return "undefined"==typeof Response?(yield Promise.resolve().then(function(){return browser$2})).Response:Response}));var __awaiter$8=undefined&&undefined.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(o,i){function s(e){try{u(n.next(e));}catch(e){i(e);}}function a(e){try{u(n.throw(e));}catch(e){i(e);}}function u(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r);}))).then(s,a);}u((n=n.apply(e,r||[])).next());}))};const _getErrorMessage$1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),handleError$1=(e,r)=>__awaiter$8(void 0,void 0,void 0,(function*(){const t=yield resolveResponse();e instanceof t?e.json().then((t=>{r(new StorageApiError(_getErrorMessage$1(t),e.status||500));})).catch((e=>{r(new StorageUnknownError(_getErrorMessage$1(e),e));})):r(new StorageUnknownError(_getErrorMessage$1(e),e));})),_getRequestParams$1=(e,r,t,n)=>{const o={method:e,headers:(null==r?void 0:r.headers)||{}};return "GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json"},null==r?void 0:r.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),t))};function _handleRequest$1(e,r,t,n,o,i){return __awaiter$8(this,void 0,void 0,(function*(){return new Promise(((s,a)=>{e(t,_getRequestParams$1(r,n,o,i)).then((e=>{if(!e.ok)throw e;return (null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>s(e))).catch((e=>handleError$1(e,a)));}))}))}function get(e,r,t,n){return __awaiter$8(this,void 0,void 0,(function*(){return _handleRequest$1(e,"GET",r,t,n)}))}function post(e,r,t,n,o){return __awaiter$8(this,void 0,void 0,(function*(){return _handleRequest$1(e,"POST",r,n,o,t)}))}function put(e,r,t,n,o){return __awaiter$8(this,void 0,void 0,(function*(){return _handleRequest$1(e,"PUT",r,n,o,t)}))}function remove(e,r,t,n,o){return __awaiter$8(this,void 0,void 0,(function*(){return _handleRequest$1(e,"DELETE",r,n,o,t)}))}var __awaiter$7=undefined&&undefined.__awaiter||function(t,r,e,o){return new(e||(e=Promise))((function(n,i){function a(t){try{d(o.next(t));}catch(t){i(t);}}function s(t){try{d(o.throw(t));}catch(t){i(t);}}function d(t){var r;t.done?n(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r);}))).then(a,s);}d((o=o.apply(t,r||[])).next());}))};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(t,r={},e,o){this.url=t,this.headers=r,this.bucketId=e,this.fetch=resolveFetch$2(o);}uploadOrUpdate(t,r,e,o){return __awaiter$7(this,void 0,void 0,(function*(){try{let n;const i=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),o),a=Object.assign(Object.assign({},this.headers),"POST"===t&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&e instanceof Blob?(n=new FormData,n.append("cacheControl",i.cacheControl),n.append("",e)):"undefined"!=typeof FormData&&e instanceof FormData?(n=e,n.append("cacheControl",i.cacheControl)):(n=e,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType);const s=this._removeEmptyFolders(r),d=this._getFinalPath(s),l=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:n,headers:a},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));if(l.ok)return {data:{path:s},error:null};return {data:null,error:yield l.json()}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}upload(t,r,e){return __awaiter$7(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",t,r,e)}))}uploadToSignedUrl(t,r,e,o){return __awaiter$7(this,void 0,void 0,(function*(){const n=this._removeEmptyFolders(t),i=this._getFinalPath(n),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",r);try{let t;const r=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},o),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(r.upsert)});"undefined"!=typeof Blob&&e instanceof Blob?(t=new FormData,t.append("cacheControl",r.cacheControl),t.append("",e)):"undefined"!=typeof FormData&&e instanceof FormData?(t=e,t.append("cacheControl",r.cacheControl)):(t=e,i["cache-control"]=`max-age=${r.cacheControl}`,i["content-type"]=r.contentType);const s=yield this.fetch(a.toString(),{method:"PUT",body:t,headers:i});if(s.ok)return {data:{path:n},error:null};return {data:null,error:yield s.json()}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}createSignedUploadUrl(t){return __awaiter$7(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(t);const e=yield post(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:this.headers}),o=new URL(this.url+e.url),n=o.searchParams.get("token");if(!n)throw new StorageError("No token returned by API");return {data:{signedUrl:o.toString(),path:t,token:n},error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}update(t,r,e){return __awaiter$7(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",t,r,e)}))}move(t,r){return __awaiter$7(this,void 0,void 0,(function*(){try{return {data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r},{headers:this.headers}),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}copy(t,r){return __awaiter$7(this,void 0,void 0,(function*(){try{return {data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r},{headers:this.headers})).Key},error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}createSignedUrl(t,r,e){return __awaiter$7(this,void 0,void 0,(function*(){try{let o=this._getFinalPath(t),n=yield post(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},(null==e?void 0:e.transform)?{transform:e.transform}:{}),{headers:this.headers});const i=(null==e?void 0:e.download)?`&download=${!0===e.download?"":e.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${i}`)},{data:n,error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}createSignedUrls(t,r,e){return __awaiter$7(this,void 0,void 0,(function*(){try{const o=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),n=(null==e?void 0:e.download)?`&download=${!0===e.download?"":e.download}`:"";return {data:o.map((t=>Object.assign(Object.assign({},t),{signedUrl:t.signedURL?encodeURI(`${this.url}${t.signedURL}${n}`):null}))),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}download(t,r){return __awaiter$7(this,void 0,void 0,(function*(){const e=void 0!==(null==r?void 0:r.transform)?"render/image/authenticated":"object",o=this.transformOptsToQueryString((null==r?void 0:r.transform)||{}),n=o?`?${o}`:"";try{const r=this._getFinalPath(t),o=yield get(this.fetch,`${this.url}/${e}/${r}${n}`,{headers:this.headers,noResolveJson:!0});return {data:yield o.blob(),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}getPublicUrl(t,r){const e=this._getFinalPath(t),o=[],n=(null==r?void 0:r.download)?`download=${!0===r.download?"":r.download}`:"";""!==n&&o.push(n);const i=void 0!==(null==r?void 0:r.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==r?void 0:r.transform)||{});""!==a&&o.push(a);let s=o.join("&");return ""!==s&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${e}${s}`)}}}remove(t){return __awaiter$7(this,void 0,void 0,(function*(){try{return {data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}list(t,r,e){return __awaiter$7(this,void 0,void 0,(function*(){try{const o=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),r),{prefix:t||""});return {data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},e),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}_getFinalPath(t){return `${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const version$2="2.5.4";const DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$6=undefined&&undefined.__awaiter||function(t,r,e,i){return new(e||(e=Promise))((function(a,o){function s(t){try{l(i.next(t));}catch(t){o(t);}}function u(t){try{l(i.throw(t));}catch(t){o(t);}}function l(t){var r;t.done?a(t.value):(r=t.value,r instanceof e?r:new e((function(t){t(r);}))).then(s,u);}l((i=i.apply(t,r||[])).next());}))};class StorageBucketApi{constructor(t,r={},e){this.url=t,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),r),this.fetch=resolveFetch$2(e);}listBuckets(){return __awaiter$6(this,void 0,void 0,(function*(){try{return {data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}getBucket(t){return __awaiter$6(this,void 0,void 0,(function*(){try{return {data:yield get(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}createBucket(t,r={public:!1}){return __awaiter$6(this,void 0,void 0,(function*(){try{return {data:yield post(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}updateBucket(t,r){return __awaiter$6(this,void 0,void 0,(function*(){try{return {data:yield put(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}emptyBucket(t){return __awaiter$6(this,void 0,void 0,(function*(){try{return {data:yield post(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}deleteBucket(t){return __awaiter$6(this,void 0,void 0,(function*(){try{return {data:yield remove(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(t){if(isStorageError(t))return {data:null,error:t};throw t}}))}}class StorageClient extends StorageBucketApi{constructor(e,t={},r){super(e,t,r);}from(e){return new StorageFileApi(this.url,this.headers,e,this.fetch)}}const version$1="2.24.0";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js/${version$1}`};var browserPonyfill$1 = {exports: {}};!function(t,e){var r="undefined"!=typeof self?self:commonjsGlobal,o=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException;}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,o="Symbol"in t&&"iterator"in Symbol,n="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return !1}}(),s="FormData"in t,i="ArrayBuffer"in t;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return "string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return {done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t);}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1]);}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e]);}),this);}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0;}function c(t){return new Promise((function(e,r){t.onload=function(){e(t.result);},t.onerror=function(){r(t.error);};}))}function y(t){var e=new FileReader,r=c(e);return e.readAsArrayBuffer(t),r}function b(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:n&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():i&&n&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i&&(ArrayBuffer.prototype.isPrototypeOf(t)||h(t))?this._bodyArrayBuffer=b(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"));},n&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t,e,r,o=p(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=c(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=u(t),e=f(e);var r=this.map[t];this.map[t]=r?r+", "+e:e;},d.prototype.delete=function(t){delete this.map[u(t)];},d.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},d.prototype.set=function(t,e){this.map[u(t)]=f(e);},d.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this);},d.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r);})),l(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e);})),l(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e]);})),l(t)},o&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(t,e){var r,o,n=(e=e||{}).body;if(t instanceof E){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0);}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(r=e.method||this.method||"GET",o=r.toUpperCase(),w.indexOf(o)>-1?o:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n);}function v(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n));}})),e}function x(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t);}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},m.call(E.prototype),m.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];x.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException;}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack;},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException;}function A(t,r){return new Promise((function(o,s){var i=new E(t,r);if(i.signal&&i.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function h(){a.abort();}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();e.append(o,n);}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;o(new x(n,r));},a.onerror=function(){s(new TypeError("Network request failed"));},a.ontimeout=function(){s(new TypeError("Network request failed"));},a.onabort=function(){s(new e.DOMException("Aborted","AbortError"));},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&n&&(a.responseType="blob"),i.headers.forEach((function(t,e){a.setRequestHeader(e,t);})),i.signal&&(i.signal.addEventListener("abort",h),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",h);}),a.send(void 0===i._bodyInit?null:i._bodyInit);}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=d,t.Request=E,t.Response=x),e.Headers=d,e.Request=E,e.Response=x,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0});}({});}(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var n=o;(e=n.fetch).default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e;}(browserPonyfill$1,browserPonyfill$1.exports);var browserPonyfillExports=browserPonyfill$1.exports;var crossFetch = getDefaultExportFromCjs(browserPonyfillExports);var browserPonyfill=/*#__PURE__*/_mergeNamespaces({__proto__:null,default:crossFetch},[browserPonyfillExports]);var __awaiter$5=undefined&&undefined.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function a(e){try{i(o.next(e));}catch(e){s(e);}}function c(e){try{i(o.throw(e));}catch(e){s(e);}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t);}))).then(a,c);}i((o=o.apply(e,t||[])).next());}))};const resolveFetch$1=e=>{let t;return t=e||("undefined"==typeof fetch?crossFetch:fetch),(...e)=>t(...e)};const resolveHeadersConstructor=()=>"undefined"==typeof Headers?browserPonyfillExports.Headers:Headers;const fetchWithAuth=(e,t,r)=>{const o=resolveFetch$1(r),n=resolveHeadersConstructor();return (r,s)=>__awaiter$5(void 0,void 0,void 0,(function*(){var a;const c=null!==(a=yield t())&&void 0!==a?a:e;let i=new n(null==s?void 0:s.headers);return i.has("apikey")||i.set("apikey",e),i.has("Authorization")||i.set("Authorization",`Bearer ${c}`),o(r,Object.assign(Object.assign({},s),{headers:i}))}))};function stripTrailingSlash(t){return t.replace(/\/$/,"")}function applySettingDefaults(t,x){const{db:e,auth:n,realtime:a,global:i}=t,{db:r,auth:s,realtime:o,global:c}=x;return {db:Object.assign(Object.assign({},r),e),auth:Object.assign(Object.assign({},s),n),realtime:Object.assign(Object.assign({},o),a),global:Object.assign(Object.assign({},c),i)}}var __awaiter$4=undefined&&undefined.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{s(o.next(e));}catch(e){i(e);}}function c(e){try{s(o.throw(e));}catch(e){i(e);}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t);}))).then(a,c);}s((o=o.apply(e,t||[])).next());}))};function expiresAt(e){return Math.round(Date.now()/1e3)+e}function uuid(){return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return ("x"==e?t:3&t|8).toString(16)}))}const isBrowser=()=>"undefined"!=typeof document;const localStorageWriteTests={tested:!1,writable:!1};const supportsLocalStorage=()=>{if(!isBrowser())return !1;try{if("object"!=typeof globalThis.localStorage)return !1}catch(e){return !1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0;}catch(e){localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1;}return localStorageWriteTests.writable};function getParameterByName(e,t){var r;t||(t=(null===(r=null===window||void 0===window?void 0:window.location)||void 0===r?void 0:r.href)||""),e=e.replace(/[\[\]]/g,"\\$&");const o=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}const resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>__awaiter$4(void 0,void 0,void 0,(function*(){return yield (yield Promise.resolve().then(function(){return browserPonyfill})).fetch(...e)})):fetch),(...e)=>t(...e)};const looksLikeFetchResponse=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json;const setItemAsync=(e,t,r)=>__awaiter$4(void 0,void 0,void 0,(function*(){yield e.setItem(t,JSON.stringify(r));}));const getItemAsync=(e,t)=>__awaiter$4(void 0,void 0,void 0,(function*(){const r=yield e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}}));const removeItemAsync=(e,t)=>__awaiter$4(void 0,void 0,void 0,(function*(){yield e.removeItem(t);}));function decodeBase64URL(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,o,n,i,a,c,s,l="",d=0;for(e=e.replace("-","+").replace("_","/");d<e.length;)i=t.indexOf(e.charAt(d++)),a=t.indexOf(e.charAt(d++)),c=t.indexOf(e.charAt(d++)),s=t.indexOf(e.charAt(d++)),r=i<<2|a>>4,o=(15&a)<<4|c>>2,n=(3&c)<<6|s,l+=String.fromCharCode(r),64!=c&&0!=o&&(l+=String.fromCharCode(o)),64!=s&&0!=n&&(l+=String.fromCharCode(n));return l}class Deferred{constructor(){this.promise=new Deferred.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t;}));}}Deferred.promiseConstructor=Promise;function decodeJWTPayload(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(decodeBase64URL(r))}function sleep(e){return new Promise((t=>{setTimeout((()=>t(null)),e);}))}function retryable(e,t){return new Promise(((r,o)=>{(()=>{__awaiter$4(this,void 0,void 0,(function*(){for(let n=0;n<1/0;n++)try{const o=yield e(n);if(!t(n,null,o))return void r(o)}catch(e){if(!t(n,e))return void o(e)}}));})();}))}function dec2hex(e){return ("0"+e.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let o=0;o<56;o++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}function sha256(e){return __awaiter$4(this,void 0,void 0,(function*(){const t=(new TextEncoder).encode(e),r=yield crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map((e=>String.fromCharCode(e))).join("")}))}function base64urlencode(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function generatePKCEChallenge(e){return __awaiter$4(this,void 0,void 0,(function*(){if("undefined"==typeof crypto)return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;return base64urlencode(yield sha256(e))}))}
class AuthError extends Error{constructor(r,t){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=t;}}function isAuthError(r){return "object"==typeof r&&null!==r&&"__isAuthError"in r}class AuthApiError extends AuthError{constructor(r,t){super(r,t),this.name="AuthApiError",this.status=t;}toJSON(){return {name:this.name,message:this.message,status:this.status}}}function isAuthApiError(r){return isAuthError(r)&&"AuthApiError"===r.name}class AuthUnknownError extends AuthError{constructor(r,t){super(r),this.name="AuthUnknownError",this.originalError=t;}}class CustomAuthError extends AuthError{constructor(r,t,s){super(r),this.name=t,this.status=s;}toJSON(){return {name:this.name,message:this.message,status:this.status}}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400);}}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500);}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(r){super(r,"AuthInvalidCredentialsError",400);}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(r,t=null){super(r,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t;}toJSON(){return {name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(r,t=null){super(r,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t;}toJSON(){return {name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(r,t){super(r,"AuthRetryableFetchError",t);}}function isAuthRetryableFetchError(r){return isAuthError(r)&&"AuthRetryableFetchError"===r.name}var __awaiter$3=undefined&&undefined.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(o,s){function i(e){try{l(n.next(e));}catch(e){s(e);}}function a(e){try{l(n.throw(e));}catch(e){s(e);}}function l(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r);}))).then(i,a);}l((n=n.apply(e,r||[])).next());}))},__rest$1=undefined&&undefined.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);}return t};const _getErrorMessage=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),NETWORK_ERROR_CODES=[502,503,504];function handleError(e){return __awaiter$3(this,void 0,void 0,(function*(){if(!looksLikeFetchResponse(e))throw new AuthRetryableFetchError(_getErrorMessage(e),0);if(NETWORK_ERROR_CODES.includes(e.status))throw new AuthRetryableFetchError(_getErrorMessage(e),e.status);let r;try{r=yield e.json();}catch(e){throw new AuthUnknownError(_getErrorMessage(e),e)}throw new AuthApiError(_getErrorMessage(r),e.status||500)}))}const _getRequestParams=(e,r,t,n)=>{const o={method:e,headers:(null==r?void 0:r.headers)||{}};return "GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==r?void 0:r.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),t))};function _request(e,r,t,n){var o;return __awaiter$3(this,void 0,void 0,(function*(){const s=Object.assign({},null==n?void 0:n.headers);(null==n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);const i=null!==(o=null==n?void 0:n.query)&&void 0!==o?o:{};(null==n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=yield _handleRequest(e,r,t+a,{headers:s,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return (null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}))}function _handleRequest(e,r,t,n,o,s){return __awaiter$3(this,void 0,void 0,(function*(){const i=_getRequestParams(r,n,o,s);let a;try{a=yield e(t,i);}catch(e){throw console.error(e),new AuthRetryableFetchError(_getErrorMessage(e),0)}if(a.ok||(yield handleError(a)),null==n?void 0:n.noResolveJson)return a;try{return yield a.json()}catch(e){yield handleError(e);}}))}function _sessionResponse(e){var r;let t=null;hasSession(e)&&(t=Object.assign({},e),t.expires_at=expiresAt(e.expires_in));return {data:{session:t,user:null!==(r=e.user)&&void 0!==r?r:e},error:null}}function _userResponse(e){var r;return {data:{user:null!==(r=e.user)&&void 0!==r?r:e},error:null}}function _ssoResponse(e){return {data:e,error:null}}function _generateLinkResponse(e){const{action_link:r,email_otp:t,hashed_token:n,redirect_to:o,verification_type:s}=e,i=__rest$1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return {data:{properties:{action_link:r,email_otp:t,hashed_token:n,redirect_to:o,verification_type:s},user:Object.assign({},i)},error:null}}function _noResolveJsonResponse(e){return e}function hasSession(e){return e.access_token&&e.refresh_token&&e.expires_in}var __awaiter$2=undefined&&undefined.__awaiter||function(r,e,t,s){return new(t||(t=Promise))((function(i,o){function n(r){try{u(s.next(r));}catch(r){o(r);}}function a(r){try{u(s.throw(r));}catch(r){o(r);}}function u(r){var e;r.done?i(r.value):(e=r.value,e instanceof t?e:new t((function(r){r(e);}))).then(n,a);}u((s=s.apply(r,e||[])).next());}))},__rest=undefined&&undefined.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(r);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(t[s[i]]=r[s[i]]);}return t};class GoTrueAdminApi{constructor({url:r="",headers:e={},fetch:t}){this.url=r,this.headers=e,this.fetch=resolveFetch(t),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)};}signOut(r){return __awaiter$2(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(r){if(isAuthError(r))return {data:null,error:r};throw r}}))}inviteUserByEmail(r,e={}){return __awaiter$2(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:_userResponse})}catch(r){if(isAuthError(r))return {data:{user:null},error:r};throw r}}))}generateLink(r){return __awaiter$2(this,void 0,void 0,(function*(){try{const{options:e}=r,t=__rest(r,["options"]),s=Object.assign(Object.assign({},t),e);return "newEmail"in t&&(s.new_email=null==t?void 0:t.newEmail,delete s.newEmail),yield _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:_generateLinkResponse,redirectTo:null==e?void 0:e.redirectTo})}catch(r){if(isAuthError(r))return {data:{properties:null,user:null},error:r};throw r}}))}createUser(r){return __awaiter$2(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return {data:{user:null},error:r};throw r}}))}listUsers(r){var e,t,s,i,o,n,a;return __awaiter$2(this,void 0,void 0,(function*(){try{const u={nextPage:null,lastPage:0,total:0},h=yield _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(t=null===(e=null==r?void 0:r.page)||void 0===e?void 0:e.toString())&&void 0!==t?t:"",per_page:null!==(i=null===(s=null==r?void 0:r.perPage)||void 0===s?void 0:s.toString())&&void 0!==i?i:""},xform:_noResolveJsonResponse});if(h.error)throw h.error;const l=yield h.json(),d=null!==(o=h.headers.get("x-total-count"))&&void 0!==o?o:0,c=null!==(a=null===(n=h.headers.get("link"))||void 0===n?void 0:n.split(","))&&void 0!==a?a:[];return c.length>0&&(c.forEach((r=>{const e=parseInt(r.split(";")[0].split("=")[1].substring(0,1)),t=JSON.parse(r.split(";")[1].split("=")[1]);u[`${t}Page`]=e;})),u.total=parseInt(d)),{data:Object.assign(Object.assign({},l),u),error:null}}catch(r){if(isAuthError(r))return {data:{users:[]},error:r};throw r}}))}getUserById(r){return __awaiter$2(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return {data:{user:null},error:r};throw r}}))}updateUserById(r,e){return __awaiter$2(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:e,headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return {data:{user:null},error:r};throw r}}))}deleteUser(r,e=!1){return __awaiter$2(this,void 0,void 0,(function*(){try{return yield _request(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:e},xform:_userResponse})}catch(r){if(isAuthError(r))return {data:{user:null},error:r};throw r}}))}_listFactors(r){return __awaiter$2(this,void 0,void 0,(function*(){try{const{data:e,error:t}=yield _request(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return {data:e,error:t}}catch(r){if(isAuthError(r))return {data:null,error:r};throw r}}))}_deleteFactor(r){return __awaiter$2(this,void 0,void 0,(function*(){try{return {data:yield _request(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(r){if(isAuthError(r))return {data:null,error:r};throw r}}))}}const version="2.38.0";const GOTRUE_URL="http://localhost:9999";const STORAGE_KEY="supabase.auth.token";const DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`};const EXPIRY_MARGIN=10;
const localStorageAdapter={getItem:o=>supportsLocalStorage()?globalThis.localStorage.getItem(o):null,setItem:(o,e)=>{supportsLocalStorage()&&globalThis.localStorage.setItem(o,e);},removeItem:o=>{supportsLocalStorage()&&globalThis.localStorage.removeItem(o);}};function polyfillGlobalThis(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__;}catch(e){"undefined"!=typeof self&&(self.globalThis=self);}}var __awaiter$1=undefined&&undefined.__awaiter||function(e,r,t,i){return new(t||(t=Promise))((function(s,o){function n(e){try{l(i.next(e));}catch(e){o(e);}}function a(e){try{l(i.throw(e));}catch(e){o(e);}}function l(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r);}))).then(n,a);}l((i=i.apply(e,r||[])).next());}))};polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1};class GoTrueClient{constructor(e){var r;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const t=Object.assign(Object.assign({},DEFAULT_OPTIONS),e);if(this.logDebugMessages=t.debug,this.inMemorySession=null,this.storageKey=t.storageKey,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.storage=t.storage||localStorageAdapter,this.admin=new GoTrueAdminApi({url:t.url,headers:t.headers,fetch:t.fetch}),this.url=t.url,this.headers=t.headers,this.fetch=resolveFetch(t.fetch),this.detectSessionInUrl=t.detectSessionInUrl,this.flowType=t.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===localStorageAdapter&&!supportsLocalStorage()&&console.warn("No storage option exists to persist the session, which may result in unexpected behavior when using auth.\n        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning."),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey);}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e);}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",(e=>__awaiter$1(this,void 0,void 0,(function*(){this._debug("received broadcast notification from other tab or client",e),yield this._notifyAllSubscribers(e.data.event,e.data.session,!1);}))));}this.initialize();}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${(new Date).toISOString()}`,...e),this}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return __awaiter$1(this,void 0,void 0,(function*(){if(this.initializePromise)return this.initializePromise;try{const e=!!isBrowser()&&(yield this._isPKCEFlow());if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:r,error:t}=yield this._getSessionFromUrl(e);if(t)return this._debug("#_initialize()","error detecting session from URL",t),yield this._removeSession(),{error:t};const{session:i,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),yield this._saveSession(i),setTimeout((()=>__awaiter$1(this,void 0,void 0,(function*(){"recovery"===s?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",i):yield this._notifyAllSubscribers("SIGNED_IN",i);}))),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return isAuthError(e)?{error:e}:{error:new AuthUnknownError("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end");}}))}signUp(e){var r,t,i;return __awaiter$1(this,void 0,void 0,(function*(){try{let s;if(yield this._removeSession(),"email"in e){const{email:t,password:i,options:o}=e;let n=null,a=null;if("pkce"===this.flowType){const e=generatePKCEVerifier();yield setItemAsync(this.storage,`${this.storageKey}-code-verifier`,e),n=yield generatePKCEChallenge(e),a=e===n?"plain":"s256";}s=yield _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==o?void 0:o.emailRedirectTo,body:{email:t,password:i,data:null!==(r=null==o?void 0:o.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken},code_challenge:n,code_challenge_method:a},xform:_sessionResponse});}else {if(!("phone"in e))throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");{const{phone:r,password:o,options:n}=e;s=yield _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:r,password:o,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms",gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:_sessionResponse});}}const{data:o,error:n}=s;if(n||!o)return {data:{user:null,session:null},error:n};const a=o.session,l=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(e){if(isAuthError(e))return {data:{user:null,session:null},error:e};throw e}}))}signInWithPassword(e){return __awaiter$1(this,void 0,void 0,(function*(){try{let r;if(yield this._removeSession(),"email"in e){const{email:t,password:i,options:s}=e;r=yield _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:t,password:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:_sessionResponse});}else {if(!("phone"in e))throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:s}=e;r=yield _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:t,password:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:_sessionResponse});}}const{data:t,error:i}=r;return i?{data:{user:null,session:null},error:i}:t&&t.session&&t.user?(t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:{user:t.user,session:t.session},error:i}):{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}}catch(e){if(isAuthError(e))return {data:{user:null,session:null},error:e};throw e}}))}signInWithOAuth(e){var r,t,i,s;return __awaiter$1(this,void 0,void 0,(function*(){return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(t=e.options)||void 0===t?void 0:t.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}))}exchangeCodeForSession(e){return __awaiter$1(this,void 0,void 0,(function*(){const r=yield getItemAsync(this.storage,`${this.storageKey}-code-verifier`),{data:t,error:i}=yield _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:_sessionResponse});return yield removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:t&&t.session&&t.user?(t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:t,error:i}):{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}}))}signInWithIdToken(e){return __awaiter$1(this,void 0,void 0,(function*(){yield this._removeSession();try{const{options:r,provider:t,token:i,access_token:s,nonce:o}=e,n=yield _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:t,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:_sessionResponse}),{data:a,error:l}=n;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}}catch(e){if(isAuthError(e))return {data:{user:null,session:null},error:e};throw e}}))}signInWithOtp(e){var r,t,i,s,o;return __awaiter$1(this,void 0,void 0,(function*(){try{if(yield this._removeSession(),"email"in e){const{email:i,options:s}=e;let o=null,n=null;if("pkce"===this.flowType){const e=generatePKCEVerifier();yield setItemAsync(this.storage,`${this.storageKey}-code-verifier`,e),o=yield generatePKCEChallenge(e),n=e===o?"plain":"s256";}const{error:a}=yield _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(t=null==s?void 0:s.shouldCreateUser)||void 0===t||t,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:o,code_challenge_method:n},redirectTo:null==s?void 0:s.emailRedirectTo});return {data:{user:null,session:null},error:a}}if("phone"in e){const{phone:r,options:t}=e,{data:n,error:a}=yield _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:r,data:null!==(i=null==t?void 0:t.data)&&void 0!==i?i:{},create_user:null===(s=null==t?void 0:t.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken},channel:null!==(o=null==t?void 0:t.channel)&&void 0!==o?o:"sms"}});return {data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:a}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(e){if(isAuthError(e))return {data:{user:null,session:null},error:e};throw e}}))}verifyOtp(e){var r,t;return __awaiter$1(this,void 0,void 0,(function*(){try{"email_change"!==e.type&&"phone_change"!==e.type&&(yield this._removeSession());const{data:i,error:s}=yield _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:null===(r=e.options)||void 0===r?void 0:r.captchaToken}}),redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,xform:_sessionResponse});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,n=i.user;return (null==o?void 0:o.access_token)&&(yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:n,session:o},error:null}}catch(e){if(isAuthError(e))return {data:{user:null,session:null},error:e};throw e}}))}signInWithSSO(e){var r,t,i;return __awaiter$1(this,void 0,void 0,(function*(){try{return yield this._removeSession(),yield _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(t=null===(r=e.options)||void 0===r?void 0:r.redirectTo)&&void 0!==t?t:void 0}),(null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:_ssoResponse})}catch(e){if(isAuthError(e))return {data:null,error:e};throw e}}))}reauthenticate(){return __awaiter$1(this,void 0,void 0,(function*(){try{const{data:{session:e},error:r}=yield this.getSession();if(r)throw r;if(!e)throw new AuthSessionMissingError;const{error:t}=yield _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return {data:{user:null,session:null},error:t}}catch(e){if(isAuthError(e))return {data:{user:null,session:null},error:e};throw e}}))}resend(e){return __awaiter$1(this,void 0,void 0,(function*(){try{yield this._removeSession();const r=`${this.url}/resend`;if("email"in e){const{email:t,type:i,options:s}=e,{error:o}=yield _request(this.fetch,"POST",r,{headers:this.headers,body:{email:t,type:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return {data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,type:i,options:s}=e,{data:o,error:n}=yield _request(this.fetch,"POST",r,{headers:this.headers,body:{phone:t,type:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return {data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:n}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(e){if(isAuthError(e))return {data:{user:null,session:null},error:e};throw e}}))}getSession(){return __awaiter$1(this,void 0,void 0,(function*(){yield this.initializePromise,this._debug("#getSession()","begin");try{let e=null;if(this.persistSession){const r=yield getItemAsync(this.storage,this.storageKey);this._debug("#getSession()","session from storage",r),null!==r&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession()));}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return {data:{session:null},error:null};const r=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#getSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r)return {data:{session:e},error:null};const{session:t,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:t},error:null}}finally{this._debug("#getSession()","end");}}))}getUser(e){var r,t;return __awaiter$1(this,void 0,void 0,(function*(){try{if(!e){const{data:i,error:s}=yield this.getSession();if(s)throw s;e=null!==(t=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==t?t:void 0;}return yield _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse})}catch(e){if(isAuthError(e))return {data:{user:null},error:e};throw e}}))}updateUser(e,r={}){return __awaiter$1(this,void 0,void 0,(function*(){try{const{data:t,error:i}=yield this.getSession();if(i)throw i;if(!t.session)throw new AuthSessionMissingError;const s=t.session,{data:o,error:n}=yield _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==r?void 0:r.emailRedirectTo,body:e,jwt:s.access_token,xform:_userResponse});if(n)throw n;return s.user=o.user,yield this._saveSession(s),yield this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}catch(e){if(isAuthError(e))return {data:{user:null},error:e};throw e}}))}_decodeJWT(e){return decodeJWTPayload(e)}setSession(e){return __awaiter$1(this,void 0,void 0,(function*(){try{if(!e.access_token||!e.refresh_token)throw new AuthSessionMissingError;const r=Date.now()/1e3;let t=r,i=!0,s=null;const o=decodeJWTPayload(e.access_token);if(o.exp&&(t=o.exp,i=t<=r),i){const{session:r,error:t}=yield this._callRefreshToken(e.refresh_token);if(t)return {data:{user:null,session:null},error:t};if(!r)return {data:{user:null,session:null},error:null};s=r;}else {const{data:i,error:o}=yield this.getUser(e.access_token);if(o)throw o;s={access_token:e.access_token,refresh_token:e.refresh_token,user:i.user,token_type:"bearer",expires_in:t-r,expires_at:t},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s);}return {data:{user:s.user,session:s},error:null}}catch(e){if(isAuthError(e))return {data:{session:null,user:null},error:e};throw e}}))}refreshSession(e){var r;return __awaiter$1(this,void 0,void 0,(function*(){try{if(!e){const{data:t,error:i}=yield this.getSession();if(i)throw i;e=null!==(r=t.session)&&void 0!==r?r:void 0;}if(!(null==e?void 0:e.refresh_token))throw new AuthSessionMissingError;const{session:t,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:t?{data:{user:t.user,session:t},error:null}:{data:{user:null,session:null},error:null}}catch(e){if(isAuthError(e))return {data:{user:null,session:null},error:e};throw e}}))}_getSessionFromUrl(e){return __awaiter$1(this,void 0,void 0,(function*(){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");if(e){const e=getParameterByName("code");if(!e)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:r,error:t}=yield this.exchangeCodeForSession(e);if(t)throw t;if(!r.session)throw new AuthPKCEGrantCodeExchangeError("No session detected.");let i=new URL(window.location.href);return i.searchParams.delete("code"),window.history.replaceState(window.history.state,"",i.toString()),{data:{session:r.session,redirectType:null},error:null}}const r=getParameterByName("error_description");if(r){const e=getParameterByName("error_code");if(!e)throw new AuthImplicitGrantRedirectError("No error_code detected.");const t=getParameterByName("error");if(!t)throw new AuthImplicitGrantRedirectError("No error detected.");throw new AuthImplicitGrantRedirectError(r,{error:t,code:e})}const t=getParameterByName("provider_token"),i=getParameterByName("provider_refresh_token"),s=getParameterByName("access_token");if(!s)throw new AuthImplicitGrantRedirectError("No access_token detected.");const o=getParameterByName("expires_in");if(!o)throw new AuthImplicitGrantRedirectError("No expires_in detected.");const n=getParameterByName("refresh_token");if(!n)throw new AuthImplicitGrantRedirectError("No refresh_token detected.");const a=getParameterByName("token_type");if(!a)throw new AuthImplicitGrantRedirectError("No token_type detected.");const l=Math.round(Date.now()/1e3)+parseInt(o),{data:d,error:h}=yield this.getUser(s);if(h)throw h;const u=d.user,c={provider_token:t,provider_refresh_token:i,access_token:s,expires_in:parseInt(o),expires_at:l,refresh_token:n,token_type:a,user:u},_=getParameterByName("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:c,redirectType:_},error:null}}catch(e){if(isAuthError(e))return {data:{session:null,redirectType:null},error:e};throw e}}))}_isImplicitGrantFlow(){return isBrowser()&&(Boolean(getParameterByName("access_token"))||Boolean(getParameterByName("error_description")))}_isPKCEFlow(){return __awaiter$1(this,void 0,void 0,(function*(){const e=yield getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return Boolean(getParameterByName("code"))&&Boolean(e)}))}signOut(){var e;return __awaiter$1(this,void 0,void 0,(function*(){const{data:r,error:t}=yield this.getSession();if(t)return {error:t};const i=null===(e=r.session)||void 0===e?void 0:e.access_token;if(i){const{error:e}=yield this.admin.signOut(i);if(e&&(!isAuthApiError(e)||404!==e.status&&401!==e.status))return {error:e}}return yield this._removeSession(),yield removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}}))}onAuthStateChange(e){const r=uuid(),t={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r);}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,t),this._emitInitialSession(r),{data:{subscription:t}}}_emitInitialSession(e){var r,t;return __awaiter$1(this,void 0,void 0,(function*(){try{const{data:{session:t},error:i}=yield this.getSession();if(i)throw i;yield null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",t),this._debug("INITIAL_SESSION","callback id",e,"session",t);}catch(r){yield null===(t=this.stateChangeEmitters.get(e))||void 0===t?void 0:t.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r);}}))}resetPasswordForEmail(e,r={}){return __awaiter$1(this,void 0,void 0,(function*(){let t=null,i=null;if("pkce"===this.flowType){const e=generatePKCEVerifier();yield setItemAsync(this.storage,`${this.storageKey}-code-verifier`,e),t=yield generatePKCEChallenge(e),i=e===t?"plain":"s256";}try{return yield _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:t,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(e){if(isAuthError(e))return {data:null,error:e};throw e}}))}_refreshAccessToken(e){return __awaiter$1(this,void 0,void 0,(function*(){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const t=Date.now();return yield retryable((t=>__awaiter$1(this,void 0,void 0,(function*(){return yield sleep(200*t),this._debug(r,"refreshing attempt",t),yield _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})}))),((e,r,i)=>i&&i.error&&isAuthRetryableFetchError(i.error)&&Date.now()+200*(e+1)-t<3e4))}catch(e){if(this._debug(r,"error",e),isAuthError(e))return {data:{session:null,user:null},error:e};throw e}finally{this._debug(r,"end");}}))}_isValidSession(e){return "object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return __awaiter$1(this,void 0,void 0,(function*(){const t=yield this._getUrlForProvider(e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",t),isBrowser()&&!r.skipBrowserRedirect&&window.location.assign(t),{data:{provider:e,url:t},error:null}}))}_recoverAndRefresh(){var e;return __awaiter$1(this,void 0,void 0,(function*(){const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const t=yield getItemAsync(this.storage,this.storageKey);if(this._debug(r,"session from storage",t),!this._isValidSession(t))return this._debug(r,"session is not valid"),void(null!==t&&(yield this._removeSession()));const i=Math.round(Date.now()/1e3),s=(null!==(e=t.expires_at)&&void 0!==e?e:1/0)<i+EXPIRY_MARGIN;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${EXPIRY_MARGIN}s`),s){if(this.autoRefreshToken&&t.refresh_token){const{error:e}=yield this._callRefreshToken(t.refresh_token);e&&(console.error(e),isAuthRetryableFetchError(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),yield this._removeSession()));}}else yield this._notifyAllSubscribers("SIGNED_IN",t);}catch(e){return this._debug(r,"error",e),void console.error(e)}finally{this._debug(r,"end");}}))}_callRefreshToken(e){var r,t;return __awaiter$1(this,void 0,void 0,(function*(){if(!e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Deferred;const{data:r,error:t}=yield this._refreshAccessToken(e);if(t)throw t;if(!r.session)throw new AuthSessionMissingError;yield this._saveSession(r.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const i={session:r.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(e){if(this._debug(i,"error",e),isAuthError(e)){const t={session:null,error:e};return null===(r=this.refreshingDeferred)||void 0===r||r.resolve(t),t}throw null===(t=this.refreshingDeferred)||void 0===t||t.reject(e),e}finally{this.refreshingDeferred=null,this._debug(i,"end");}}))}_notifyAllSubscribers(e,r,t=!0){return __awaiter$1(this,void 0,void 0,(function*(){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${t}`);try{this.broadcastChannel&&t&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],s=Array.from(this.stateChangeEmitters.values()).map((t=>__awaiter$1(this,void 0,void 0,(function*(){try{yield t.callback(e,r);}catch(e){i.push(e);}}))));if(yield Promise.all(s),i.length>0){for(let e=0;e<i.length;e+=1)console.error(i[e]);throw i[0]}}finally{this._debug(i,"end");}}))}_saveSession(e){return __awaiter$1(this,void 0,void 0,(function*(){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e));}))}_persistSession(e){return this._debug("#_persistSession()",e),setItemAsync(this.storage,this.storageKey,e)}_removeSession(){return __awaiter$1(this,void 0,void 0,(function*(){this._debug("#_removeSession()"),this.persistSession?yield removeItemAsync(this.storage,this.storageKey):this.inMemorySession=null;}))}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e);}catch(e){console.error("removing visibilitychange callback failed",e);}}_startAutoRefresh(){return __awaiter$1(this,void 0,void 0,(function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),yield this._autoRefreshTokenTick();}))}_stopAutoRefresh(){return __awaiter$1(this,void 0,void 0,(function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);}))}startAutoRefresh(){return __awaiter$1(this,void 0,void 0,(function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh();}))}stopAutoRefresh(){return __awaiter$1(this,void 0,void 0,(function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh();}))}_autoRefreshTokenTick(){return __awaiter$1(this,void 0,void 0,(function*(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{const{data:{session:r}}=yield this.getSession();if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const t=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${t} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),t<=3&&(yield this._callRefreshToken(r.refresh_token));}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e);}}finally{this._debug("#_autoRefreshTokenTick()","end");}}))}_handleVisibilityChange(){return __awaiter$1(this,void 0,void 0,(function*(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>__awaiter$1(this,void 0,void 0,(function*(){return yield this._onVisibilityChanged(!1)})),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0);}catch(e){console.error("_handleVisibilityChange",e);}}))}_onVisibilityChanged(e){return __awaiter$1(this,void 0,void 0,(function*(){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(e||(yield this.initializePromise,yield this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh();}))}_getUrlForProvider(e,r){return __awaiter$1(this,void 0,void 0,(function*(){const t=[`provider=${encodeURIComponent(e)}`];if((null==r?void 0:r.redirectTo)&&t.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&t.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const e=generatePKCEVerifier();yield setItemAsync(this.storage,`${this.storageKey}-code-verifier`,e);const r=yield generatePKCEChallenge(e),i=e===r?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",r,"method",i);const s=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(i)}`});t.push(s.toString());}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);t.push(e.toString());}return `${this.url}/authorize?${t.join("&")}`}))}_unenroll(e){var r;return __awaiter$1(this,void 0,void 0,(function*(){try{const{data:t,error:i}=yield this.getSession();return i?{data:null,error:i}:yield _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==t?void 0:t.session)||void 0===r?void 0:r.access_token})}catch(e){if(isAuthError(e))return {data:null,error:e};throw e}}))}_enroll(e){var r,t;return __awaiter$1(this,void 0,void 0,(function*(){try{const{data:i,error:s}=yield this.getSession();if(s)return {data:null,error:s};const{data:o,error:n}=yield _request(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token});return n?{data:null,error:n}:((null===(t=null==o?void 0:o.totp)||void 0===t?void 0:t.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}catch(e){if(isAuthError(e))return {data:null,error:e};throw e}}))}_verify(e){var r;return __awaiter$1(this,void 0,void 0,(function*(){try{const{data:t,error:i}=yield this.getSession();if(i)return {data:null,error:i};const{data:s,error:o}=yield _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null==t?void 0:t.session)||void 0===r?void 0:r.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})}catch(e){if(isAuthError(e))return {data:null,error:e};throw e}}))}_challenge(e){var r;return __awaiter$1(this,void 0,void 0,(function*(){try{const{data:t,error:i}=yield this.getSession();return i?{data:null,error:i}:yield _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(r=null==t?void 0:t.session)||void 0===r?void 0:r.access_token})}catch(e){if(isAuthError(e))return {data:null,error:e};throw e}}))}_challengeAndVerify(e){return __awaiter$1(this,void 0,void 0,(function*(){const{data:r,error:t}=yield this._challenge({factorId:e.factorId});return t?{data:null,error:t}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}))}_listFactors(){return __awaiter$1(this,void 0,void 0,(function*(){const{data:{user:e},error:r}=yield this.getUser();if(r)return {data:null,error:r};const t=(null==e?void 0:e.factors)||[],i=t.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return {data:{all:t,totp:i},error:null}}))}_getAuthenticatorAssuranceLevel(){var e,r;return __awaiter$1(this,void 0,void 0,(function*(){const{data:{session:t},error:i}=yield this.getSession();if(i)return {data:null,error:i};if(!t)return {data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(t.access_token);let o=null;s.aal&&(o=s.aal);let n=o;(null!==(r=null===(e=t.user.factors)||void 0===e?void 0:e.filter((e=>"verified"===e.status)))&&void 0!==r?r:[]).length>0&&(n="aal2");return {data:{currentLevel:o,nextLevel:n,currentAuthenticationMethods:s.amr||[]},error:null}}))}}GoTrueClient.nextInstanceID=0;class SupabaseAuthClient extends GoTrueClient{constructor(e){super(e);}}var __awaiter=undefined&&undefined.__awaiter||function(e,t,s,i){return new(s||(s=Promise))((function(a,n){function r(e){try{l(i.next(e));}catch(e){n(e);}}function h(e){try{l(i.throw(e));}catch(e){n(e);}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t);}))).then(r,h);}l((i=i.apply(e,t||[])).next());}))};const DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};class SupabaseClient{constructor(e,t,s){var i,a,n,r,h,l,o,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=stripTrailingSlash(e);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const p=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:p}),global:DEFAULT_GLOBAL_OPTIONS},g=applySettingDefaults(null!=s?s:{},d);this.storageKey=null!==(a=null===(i=g.auth)||void 0===i?void 0:i.storageKey)&&void 0!==a?a:"",this.headers=null!==(r=null===(n=g.global)||void 0===n?void 0:n.headers)&&void 0!==r?r:{},this.auth=this._initSupabaseAuthClient(null!==(h=g.auth)&&void 0!==h?h:{},this.headers,null===(l=g.global)||void 0===l?void 0:l.fetch),this.fetch=fetchWithAuth(t,this._getAccessToken.bind(this),null===(o=g.global)||void 0===o?void 0:o.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new PostgrestClient(`${c}/rest/v1`,{headers:this.headers,schema:null===(u=g.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents();}get functions(){return new FunctionsClient(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new StorageClient(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},s){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return __awaiter(this,void 0,void 0,(function*(){const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,storageKey:a,flowType:n},r,h){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},l),r),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,flowType:n,fetch:h})}_initRealtimeClient(e){return new RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,null==t?void 0:t.access_token,"CLIENT");}))}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===t?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==s&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=t?t:null),this.changedAccessToken=t);}}const createClient=(e,r,t)=>new SupabaseClient(e,r,t);const supabase=createClient("https://yoaibhoxjjxfokrnhvit.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlvYWliaG94amp4Zm9rcm5odml0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTcxNzg3NzksImV4cCI6MjAxMjc1NDc3OX0.-qseh0pNpQi3ImY_LadFw-JaKIgbnLJIP0NUS9bhUoU");
const usePostsApi=defineStore("posts-api",{state:()=>({posts:[],replyingTo:null}),actions:{async getPosts(){try{const e=await supabase.from("posts").select("\n                        id,\n                        text,\n                        created_at,\n                        loveCount, \n                        commentCount,\n                        shareCount,\n                        user:users(username, name),\n                        loves (id, created_at),\n                        lang, translatedText,\n                        isDiscussion,\n                        discussionRoot (id, text)\n                    ").eq("loves.uid","9dc7c423-a8ad-4319-b43a-28f85d54fd69").order("created_at");return e.data&&(this.posts=e.data),e.data}catch(e){console.log(e);}},async getPost(e){try{return (await supabase.from("posts").select("\n                            id,\n                            text,\n                            created_at,\n                            loveCount, \n                            commentCount,\n                            shareCount,\n                            user:users(username, name),\n                            loves(id, created_at),\n                            lang, translatedText,\n                            isDiscussion,\n                            discussionRoot (id, text)\n                        ").eq("id",e).eq("loves.uid","9dc7c423-a8ad-4319-b43a-28f85d54fd69").single()).data}catch(e){console.log(e);}},async translatePost(e){const t={text:"",lang:""};try{const s=await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&tl=en&sl=auto&dt=t&q=${e}`),r=await s.json();return t.text=r[0][0][0],t.lang=r[2],t}catch(e){return t.text="Failed to translate",t}},async getComments(e){try{return (await supabase.from("comments").select("\n                            id,\n                            comment,\n                            created_at,\n                            replyCount,\n                            user (username, name)\n                        ").eq("post_id",e).is("replyTo",null).order("id")).data}catch(e){console.log(e);}},async getReplies(e){try{return (await supabase.from("comments").select("\n                            id,\n                            comment,\n                            created_at,\n                            replyCount,\n                            user (username, name)\n                        ").eq("replyTo",e).order("id")).data}catch(e){console.log(e);}},async lovePost(e){try{const t=await supabase.from("loves").insert({pid:e,uid:"9dc7c423-a8ad-4319-b43a-28f85d54fd69"});if(t.error)return console.log(t.error),t.error;const s=await supabase.rpc("increment_post_love",{post_id:e});return s.error?(console.log(s.error),s.error):t.status}catch(e){return console.log(e),0}},async unlovePost(e){try{const t=await supabase.from("loves").delete().eq("pid",e).eq("uid","9dc7c423-a8ad-4319-b43a-28f85d54fd69");if(t.error)return console.log(t.error),t.error;const s=await supabase.rpc("decrement_post_love",{post_id:e});return s.error?(console.log(s.error),s.error):t.status}catch(e){return console.log(e),0}},async createPost(e,t,s){"en"===t&&(s="");try{const r=await supabase.from("posts").insert({text:e,lang:t,translatedText:s,uid:"9dc7c423-a8ad-4319-b43a-28f85d54fd69"});return r.error?(console.log(r.error),r.error):r.status}catch(e){return console.log(e),0}},async createComment(e,t,s){try{const r=await supabase.from("comments").insert({post_id:e,comment:t,user:"9dc7c423-a8ad-4319-b43a-28f85d54fd69",replyTo:s});return r.error?(console.log(r.error),r.error):(null!=s&&await supabase.rpc("increment_decrement_reply_count",{comment_id:s,increment:!0}),r.status)}catch(e){return console.log(e),0}}}});defineStore("discussion-api",{actions:{async getPostDiscussion(e){try{return (await supabase.from("discussions").select("\n                            id,\n                            created_at,\n                            uid (username, name),\n                            text,\n                            lang,\n                            translatedText\n                        ").eq("post_id",e).order("id")).data}catch(e){console.log(e);}},async createComment(e,t,s){try{const s=await supabase.from("discussions").insert({post_id:e,text:t,uid:"9dc7c423-a8ad-4319-b43a-28f85d54fd69"});return s.error?(console.log(s.error),s.error):s.status}catch(e){return console.log(e),0}}}});
/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
const assign=Object.assign;const noop=()=>{},isArray=Array.isArray;function isSameRouteRecord(e,t){return (e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return !1;for(const o in e)if(!isSameRouteLocationParamsValue(e[o],t[o]))return !1;return !0}function isSameRouteLocationParamsValue(e,t){return isArray(e)?isEquivalentArray(e,t):isArray(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray(t)?e.length===t.length&&e.every(((e,o)=>e===t[o])):1===e.length&&e[0]===t}var NavigationType,NavigationDirection;!function(e){e.pop="pop",e.push="push";}(NavigationType||(NavigationType={})),function(e){e.back="back",e.forward="forward",e.unknown="";}(NavigationDirection||(NavigationDirection={}));var NavigationFailureType;!function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated";}(NavigationFailureType||(NavigationFailureType={}));const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useLink(e){const t=inject(routerKey),o=inject(routeLocationKey),n=computed((()=>t.resolve(unref(e.to)))),r=computed((()=>{const{matched:e}=n.value,{length:t}=e,r=e[t-1],a=o.matched;if(!r||!a.length)return -1;const i=a.findIndex(isSameRouteRecord.bind(null,r));if(i>-1)return i;const s=getOriginalPath(e[t-2]);return t>1&&getOriginalPath(r)===s&&a[a.length-1].path!==s?a.findIndex(isSameRouteRecord.bind(null,e[t-2])):i})),a=computed((()=>r.value>-1&&includesParams(o.params,n.value.params))),i=computed((()=>r.value>-1&&r.value===o.matched.length-1&&isSameRouteLocationParams(o.params,n.value.params)));return {route:n,href:computed((()=>n.value.href)),isActive:a,isExactActive:i,navigate:function(o={}){return guardEvent(o)?t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop):Promise.resolve()}}}defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:useLink,setup(e,{slots:t}){const o=reactive(useLink(e)),{options:n}=inject(routerKey),r=computed((()=>({[getLinkClass(e.activeClass,n.linkActiveClass,"router-link-active")]:o.isActive,[getLinkClass(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive})));return ()=>{const n=t.default&&t.default(o);return e.custom?n:h("a",{"aria-current":o.isExactActive?e.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:r.value},n)}}});function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const o in t){const n=t[o],r=e[o];if("string"==typeof n){if(n!==r)return !1}else if(!isArray(r)||r.length!==n.length||n.some(((e,t)=>e!==r[t])))return !1}return !0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,o)=>null!=e?e:null!=t?t:o;defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:o}){const n=inject(routerViewLocationKey),r=computed((()=>e.route||n.value)),a=inject(viewDepthKey,0),i=computed((()=>{let e=unref(a);const{matched:t}=r.value;let o;for(;(o=t[e])&&!o.components;)e++;return e})),s=computed((()=>r.value.matched[i.value]));provide(viewDepthKey,computed((()=>i.value+1))),provide(matchedRouteKey,s),provide(routerViewLocationKey,r);const c=ref();return watch((()=>[c.value,s.value,e.name]),(([e,t,o],[n,r,a])=>{t&&(t.instances[o]=e,r&&r!==t&&e&&e===n&&(t.leaveGuards.size||(t.leaveGuards=r.leaveGuards),t.updateGuards.size||(t.updateGuards=r.updateGuards))),!e||!t||r&&isSameRouteRecord(t,r)&&n||(t.enterCallbacks[o]||[]).forEach((t=>t(e)));}),{flush:"post"}),()=>{const n=r.value,a=e.name,i=s.value,l=i&&i.components[a];if(!l)return normalizeSlot(o.default,{Component:l,route:n});const u=i.props[a],d=u?!0===u?n.params:"function"==typeof u?u(n):u:null,p=h(l,assign({},d,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(i.instances[a]=null);},ref:c}));return normalizeSlot(o.default,{Component:p,route:n})||p}}});function normalizeSlot(e,t){if(!e)return null;const o=e(t);return 1===o.length?o[0]:o}function useRouter(){return inject(routerKey)}const _withScopeId=e=>(pushScopeId("data-v-b2d47914"),e=e(),popScopeId(),e),_hoisted_1={style:{padding:"20px",paddingTop:"10%",paddingLeft:"5%"}},_hoisted_2=_withScopeId((()=>createElementVNode("img",{src:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTF8fGZhY2V8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60",loading:"lazy",class:"avatar"},null,-1))),_hoisted_3=_withScopeId((()=>createElementVNode("br",null,null,-1))),_hoisted_4={class:"post-options-1"},_hoisted_5=createStaticVNode('<button data-v-b2d47914><svg width="26" height="26" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b2d47914><g clip-path="url(#clip0_20_2)" data-v-b2d47914><path d="M7.49999 16.6667H4.99999C4.11593 16.6667 3.26809 16.3155 2.64297 15.6903C2.01785 15.0652 1.66666 14.2174 1.66666 13.3333V5.83332C1.66666 4.94927 2.01785 4.10142 2.64297 3.4763C3.26809 2.85118 4.11593 2.49999 4.99999 2.49999H14.1667C15.0507 2.49999 15.8986 2.85118 16.5237 3.4763C17.1488 4.10142 17.5 4.94927 17.5 5.83332V8.33332M6.66666 1.66666V3.33332M12.5 1.66666V3.33332M1.66666 6.66666H17.5M15.4167 13.0358L14.1667 14.2858" stroke="#A3F7BF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b2d47914></path><path d="M14.1667 18.3333C16.4679 18.3333 18.3333 16.4679 18.3333 14.1667C18.3333 11.8655 16.4679 10 14.1667 10C11.8655 10 10 11.8655 10 14.1667C10 16.4679 11.8655 18.3333 14.1667 18.3333Z" fill="#A3F7BF" fill-opacity="0.2" stroke="#A3F7BF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b2d47914></path></g><defs data-v-b2d47914><clipPath id="clip0_20_2" data-v-b2d47914><rect width="20" height="20" fill="white" data-v-b2d47914></rect></clipPath></defs></svg></button>',1),_hoisted_6=_withScopeId((()=>createElementVNode("svg",{width:"26",height:"26",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("path",{d:"M7.5 4.58334C7.5 5.27501 8.05833 5.83334 8.75 5.83334H11.6667V14.5833C11.6667 15.275 12.225 15.8333 12.9167 15.8333C13.6083 15.8333 14.1667 15.275 14.1667 14.5833V5.83334H17.0833C17.775 5.83334 18.3333 5.27501 18.3333 4.58334C18.3333 3.89168 17.775 3.33334 17.0833 3.33334H8.75C8.05833 3.33334 7.5 3.89168 7.5 4.58334ZM3.75 10H5V14.5833C5 15.275 5.55833 15.8333 6.25 15.8333C6.94167 15.8333 7.5 15.275 7.5 14.5833V10H8.75C9.44167 10 10 9.44168 10 8.75001C10 8.05834 9.44167 7.50001 8.75 7.50001H3.75C3.05833 7.50001 2.5 8.05834 2.5 8.75001C2.5 9.44168 3.05833 10 3.75 10Z",fill:"#A3F7BF"})],-1))),_hoisted_7=[_hoisted_6],_hoisted_8={class:"format-options"},_hoisted_9=_withScopeId((()=>createElementVNode("svg",{width:"16",height:"17",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("path",{d:"M0.751373 0C0.950286 0 1.14105 0.0790175 1.2817 0.21967C1.42236 0.360322 1.50137 0.551088 1.50137 0.75V5H8.50137V0.75C8.50137 0.551088 8.58039 0.360322 8.72104 0.21967C8.8617 0.0790175 9.05246 0 9.25137 0C9.45029 0 9.64105 0.0790175 9.7817 0.21967C9.92236 0.360322 10.0014 0.551088 10.0014 0.75V11.25C10.0014 11.4489 9.92236 11.6397 9.7817 11.7803C9.64105 11.921 9.45029 12 9.25137 12C9.05246 12 8.8617 11.921 8.72104 11.7803C8.58039 11.6397 8.50137 11.4489 8.50137 11.25V6.5H1.50137V11.25C1.50137 11.4489 1.42236 11.6397 1.2817 11.7803C1.14105 11.921 0.950286 12 0.751373 12C0.552461 12 0.361695 11.921 0.221043 11.7803C0.0803908 11.6397 0.00137329 11.4489 0.00137329 11.25V0.75C0.00137329 0.551088 0.0803908 0.360322 0.221043 0.21967C0.361695 0.0790175 0.552461 0 0.751373 0Z",fill:"#A3F7BF","fill-opacity":"0.8"})],-1))),_hoisted_10=[_hoisted_9],_hoisted_11=_withScopeId((()=>createElementVNode("svg",{width:"16",height:"17",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("path",{d:"M1 0H5.5C6.14255 0.000201235 6.77266 0.177234 7.3213 0.511705C7.86994 0.846177 8.31594 1.32519 8.61047 1.89627C8.90499 2.46734 9.03667 3.10846 8.99108 3.7494C8.94549 4.39033 8.72439 5.00636 8.352 5.53C8.99792 5.93183 9.49529 6.53322 9.76878 7.24307C10.0423 7.95292 10.077 8.73256 9.86762 9.4639C9.65828 10.1952 9.2163 10.8384 8.60863 11.2961C8.00096 11.7537 7.26071 12.0008 6.5 12H1C0.734784 12 0.48043 11.8946 0.292893 11.7071C0.105357 11.5196 0 11.2652 0 11V1C0 0.734784 0.105357 0.48043 0.292893 0.292893C0.48043 0.105357 0.734784 0 1 0ZM2 7V10H6.5C6.89782 10 7.27936 9.84196 7.56066 9.56066C7.84196 9.27936 8 8.89782 8 8.5C8 8.10218 7.84196 7.72064 7.56066 7.43934C7.27936 7.15804 6.89782 7 6.5 7H2ZM5.5 5C5.89782 5 6.27936 4.84196 6.56066 4.56066C6.84196 4.27936 7 3.89782 7 3.5C7 3.10218 6.84196 2.72064 6.56066 2.43934C6.27936 2.15804 5.89782 2 5.5 2H2V5H5.5Z",fill:"#A3F7BF","fill-opacity":"0.8"})],-1))),_hoisted_12=[_hoisted_11],_hoisted_13=_withScopeId((()=>createElementVNode("svg",{width:"16",height:"17",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("path",{d:"M3.33471 0.75C3.33471 0.551088 3.40055 0.360322 3.51776 0.21967C3.63497 0.0790175 3.79395 0 3.95971 0H9.37637C9.54213 4.19176e-09 9.7011 0.0790175 9.81831 0.21967C9.93552 0.360322 10.0014 0.551088 10.0014 0.75C10.0014 0.948912 9.93552 1.13968 9.81831 1.28033C9.7011 1.42098 9.54213 1.5 9.37637 1.5H7.28887L4.07387 10.5H6.04304C6.2088 10.5 6.36777 10.579 6.48498 10.7197C6.60219 10.8603 6.66804 11.0511 6.66804 11.25C6.66804 11.4489 6.60219 11.6397 6.48498 11.7803C6.36777 11.921 6.2088 12 6.04304 12H0.626373C0.460613 12 0.301642 11.921 0.184431 11.7803C0.0672212 11.6397 0.00137329 11.4489 0.00137329 11.25C0.00137329 11.0511 0.0672212 10.8603 0.184431 10.7197C0.301642 10.579 0.460613 10.5 0.626373 10.5H2.71387L5.92887 1.5H3.95971C3.79395 1.5 3.63497 1.42098 3.51776 1.28033C3.40055 1.13968 3.33471 0.948912 3.33471 0.75Z",fill:"#A3F7BF","fill-opacity":"0.8"})],-1))),_hoisted_14=[_hoisted_13],_hoisted_15=_withScopeId((()=>createElementVNode("button",null,[createElementVNode("svg",{width:"16",height:"17",viewBox:"0 0 11 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("g",{"clip-path":"url(#clip0_46_120)"},[createElementVNode("path",{d:"M5.00212 0.0019711C2.46735 0.0293785 0.261473 1.74322 0.521149 2.0669C0.591056 2.34658 1.5202 3.06285 1.59323 3.56625C1.66469 4.06035 1.70821 4.61503 2.17277 4.61503C2.65444 4.61503 2.65286 3.96866 2.74298 3.56625C2.88904 2.92301 3.8912 2.59672 4.15844 3.05973C4.43501 3.54139 5.04251 3.47769 5.21654 3.09857C5.77159 1.78838 7.87249 4.23382 6.79358 4.43324C4.1665 4.57838 2.76828 4.78996 1.76705 5.37778C-0.321004 6.60364 -0.0857263 8.54489 0.154505 8.64394C0.284042 12.2845 5.74219 12.9147 7.32497 10.0802V11.5649H9.74413V6.43378C9.79224 6.39387 9.86925 6.36896 9.89312 6.2435C10.4581 1.78855 8.42816 -0.0697187 5.00214 0.00199425L5.00212 0.0019711ZM7.28147 6.95651C7.28147 8.58429 6.3955 9.48443 5.39726 9.68549C4.03161 9.96058 2.74457 9.55503 2.74457 8.39371C2.7265 6.71255 5.19601 6.53273 7.09659 6.56963C7.34094 6.5948 7.27643 6.80556 7.28147 6.95651Z",fill:"#A3F7BF","fill-opacity":"0.8"})]),createElementVNode("defs",null,[createElementVNode("clipPath",{id:"clip0_46_120"},[createElementVNode("rect",{width:"10",height:"11.8519",fill:"white",transform:"translate(0.00137329)"})])])])],-1))),_hoisted_16=["value"],_hoisted_17=_withScopeId((()=>createElementVNode("p",{class:"toxicity-msg"}," Your post may appear to be toxic to others. Consider making it more friendly to readers ",-1))),_hoisted_18={style:{display:"flex",marginTop:"26px"}},_hoisted_19=createStaticVNode('<button class="options-btn" data-v-b2d47914><svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b2d47914><path opacity="0.16" d="M11 19.25C15.5563 19.25 19.25 15.5563 19.25 11C19.25 6.44365 15.5563 2.75 11 2.75C6.44365 2.75 2.75 6.44365 2.75 11C2.75 15.5563 6.44365 19.25 11 19.25Z" fill="#A3F7BF" data-v-b2d47914></path><path d="M11 19.25C15.5563 19.25 19.25 15.5563 19.25 11C19.25 6.44365 15.5563 2.75 11 2.75C6.44365 2.75 2.75 6.44365 2.75 11C2.75 15.5563 6.44365 19.25 11 19.25Z" stroke="#A3F7BF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b2d47914></path><path d="M10.0833 7.33334V11.9167H14.6667" stroke="#A3F7BF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b2d47914></path></svg> Set Lifespan </button>',1),_hoisted_20=_withScopeId((()=>createElementVNode("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createElementVNode("path",{opacity:"0.3",d:"M11 5.5C9.31449 5.4944 7.66162 5.96456 6.23139 6.85642C4.80116 7.74828 3.65165 9.02565 2.915 10.5417C4.4275 13.6308 7.52583 15.5833 11 15.5833C14.4742 15.5833 17.5725 13.6308 19.085 10.5417C18.3484 9.02565 17.1988 7.74828 15.7686 6.85642C14.3384 5.96456 12.6855 5.4944 11 5.5ZM11 14.6667C8.72667 14.6667 6.875 12.815 6.875 10.5417C6.875 8.26834 8.72667 6.41667 11 6.41667C13.2733 6.41667 15.125 8.26834 15.125 10.5417C15.125 12.815 13.2733 14.6667 11 14.6667Z",fill:"#A3F7BF"}),createElementVNode("path",{d:"M11 3.66666C6.41667 3.66666 2.5025 6.5175 0.916667 10.5417C2.5025 14.5658 6.41667 17.4167 11 17.4167C15.5833 17.4167 19.4975 14.5658 21.0833 10.5417C19.4975 6.5175 15.5833 3.66666 11 3.66666ZM11 15.5833C9.31449 15.5889 7.66162 15.1188 6.23139 14.2269C4.80116 13.3351 3.65165 12.0577 2.915 10.5417C4.4275 7.4525 7.52583 5.5 11 5.5C14.4742 5.5 17.5725 7.4525 19.085 10.5417C18.3483 12.0577 17.1988 13.3351 15.7686 14.2269C14.3384 15.1188 12.6855 15.5889 11 15.5833ZM11 6.41666C8.72667 6.41666 6.875 8.26833 6.875 10.5417C6.875 12.815 8.72667 14.6667 11 14.6667C13.2733 14.6667 15.125 12.815 15.125 10.5417C15.125 8.26833 13.2733 6.41666 11 6.41666ZM11 12.8333C10.3922 12.8333 9.80932 12.5919 9.37955 12.1621C8.94978 11.7323 8.70833 11.1495 8.70833 10.5417C8.70833 9.93388 8.94978 9.35098 9.37955 8.92121C9.80932 8.49144 10.3922 8.25 11 8.25C11.6078 8.25 12.1907 8.49144 12.6205 8.92121C13.0502 9.35098 13.2917 9.93388 13.2917 10.5417C13.2917 11.1495 13.0502 11.7323 12.6205 12.1621C12.1907 12.5919 11.6078 12.8333 11 12.8333Z",fill:"#A3F7BF"})],-1))),_hoisted_21={style:{"margin-left":"10px",color:"#ababab"}},_hoisted_22={class:"visibility-options"},_hoisted_23=_withScopeId((()=>createElementVNode("p",null,"Everyone",-1))),_hoisted_24=_withScopeId((()=>createElementVNode("p",{class:"visibility-desc"},"Everyone on String can view your Post",-1))),_hoisted_25={width:"19",height:"19",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_26=_withScopeId((()=>createElementVNode("path",{d:"M10.6075 3.90691C10.464 3.82706 10.3062 3.77629 10.1431 3.75749C9.97995 3.73868 9.81472 3.75222 9.65683 3.79732C9.49894 3.84242 9.35149 3.91821 9.22292 4.02034C9.09434 4.12247 8.98716 4.24895 8.9075 4.39253L6.58687 8.56878L5.25874 7.24066C5.14344 7.12127 5.00551 7.02604 4.853 6.96053C4.7005 6.89502 4.53647 6.86054 4.3705 6.85909C4.20452 6.85765 4.03992 6.88928 3.8863 6.95213C3.73268 7.01498 3.59312 7.1078 3.47575 7.22516C3.35839 7.34253 3.26557 7.48209 3.20272 7.63571C3.13987 7.78933 3.10824 7.95393 3.10968 8.11991C3.11112 8.28588 3.14561 8.44991 3.21112 8.60241C3.27663 8.75492 3.37186 8.89285 3.49124 9.00816L5.99125 11.5082C6.2275 11.745 6.54624 11.875 6.87499 11.875L7.04812 11.8625C7.23971 11.8357 7.42247 11.7648 7.58201 11.6554C7.74154 11.546 7.8735 11.401 7.96749 11.2319L11.0925 5.60691C11.1723 5.46344 11.223 5.30566 11.2418 5.14258C11.2606 4.9795 11.2471 4.81432 11.2021 4.65645C11.1571 4.49859 11.0814 4.35115 10.9793 4.22254C10.8773 4.09393 10.751 3.98668 10.6075 3.90691Z",fill:"#A3F7BF"},null,-1))),_hoisted_27=[_hoisted_26],_hoisted_28=_withScopeId((()=>createElementVNode("p",null,"Followers",-1))),_hoisted_29=_withScopeId((()=>createElementVNode("p",{class:"visibility-desc"},"Only your Followers can view your Post",-1))),_hoisted_30={width:"19",height:"19",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_31=_withScopeId((()=>createElementVNode("path",{d:"M10.6075 3.90691C10.464 3.82706 10.3062 3.77629 10.1431 3.75749C9.97995 3.73868 9.81472 3.75222 9.65683 3.79732C9.49894 3.84242 9.35149 3.91821 9.22292 4.02034C9.09434 4.12247 8.98716 4.24895 8.9075 4.39253L6.58687 8.56878L5.25874 7.24066C5.14344 7.12127 5.00551 7.02604 4.853 6.96053C4.7005 6.89502 4.53647 6.86054 4.3705 6.85909C4.20452 6.85765 4.03992 6.88928 3.8863 6.95213C3.73268 7.01498 3.59312 7.1078 3.47575 7.22516C3.35839 7.34253 3.26557 7.48209 3.20272 7.63571C3.13987 7.78933 3.10824 7.95393 3.10968 8.11991C3.11112 8.28588 3.14561 8.44991 3.21112 8.60241C3.27663 8.75492 3.37186 8.89285 3.49124 9.00816L5.99125 11.5082C6.2275 11.745 6.54624 11.875 6.87499 11.875L7.04812 11.8625C7.23971 11.8357 7.42247 11.7648 7.58201 11.6554C7.74154 11.546 7.8735 11.401 7.96749 11.2319L11.0925 5.60691C11.1723 5.46344 11.223 5.30566 11.2418 5.14258C11.2606 4.9795 11.2471 4.81432 11.2021 4.65645C11.1571 4.49859 11.0814 4.35115 10.9793 4.22254C10.8773 4.09393 10.751 3.98668 10.6075 3.90691Z",fill:"#A3F7BF"},null,-1))),_hoisted_32=[_hoisted_31],_hoisted_33=_withScopeId((()=>createElementVNode("p",null,"Following",-1))),_hoisted_34=_withScopeId((()=>createElementVNode("p",{class:"visibility-desc"},"Only people you Follow can view your Post",-1))),_hoisted_35={width:"19",height:"19",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_36=_withScopeId((()=>createElementVNode("path",{d:"M10.6075 3.90691C10.464 3.82706 10.3062 3.77629 10.1431 3.75749C9.97995 3.73868 9.81472 3.75222 9.65683 3.79732C9.49894 3.84242 9.35149 3.91821 9.22292 4.02034C9.09434 4.12247 8.98716 4.24895 8.9075 4.39253L6.58687 8.56878L5.25874 7.24066C5.14344 7.12127 5.00551 7.02604 4.853 6.96053C4.7005 6.89502 4.53647 6.86054 4.3705 6.85909C4.20452 6.85765 4.03992 6.88928 3.8863 6.95213C3.73268 7.01498 3.59312 7.1078 3.47575 7.22516C3.35839 7.34253 3.26557 7.48209 3.20272 7.63571C3.13987 7.78933 3.10824 7.95393 3.10968 8.11991C3.11112 8.28588 3.14561 8.44991 3.21112 8.60241C3.27663 8.75492 3.37186 8.89285 3.49124 9.00816L5.99125 11.5082C6.2275 11.745 6.54624 11.875 6.87499 11.875L7.04812 11.8625C7.23971 11.8357 7.42247 11.7648 7.58201 11.6554C7.74154 11.546 7.8735 11.401 7.96749 11.2319L11.0925 5.60691C11.1723 5.46344 11.223 5.30566 11.2418 5.14258C11.2606 4.9795 11.2471 4.81432 11.2021 4.65645C11.1571 4.49859 11.0814 4.35115 10.9793 4.22254C10.8773 4.09393 10.751 3.98668 10.6075 3.90691Z",fill:"#A3F7BF"},null,-1))),_hoisted_37=[_hoisted_36],_hoisted_38=_withScopeId((()=>createElementVNode("p",null,"Selected",-1))),_hoisted_39=_withScopeId((()=>createElementVNode("p",{class:"visibility-desc"},"Only people you Select can view your Post",-1))),_hoisted_40={width:"19",height:"19",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_41=_withScopeId((()=>createElementVNode("path",{d:"M10.6075 3.90691C10.464 3.82706 10.3062 3.77629 10.1431 3.75749C9.97995 3.73868 9.81472 3.75222 9.65683 3.79732C9.49894 3.84242 9.35149 3.91821 9.22292 4.02034C9.09434 4.12247 8.98716 4.24895 8.9075 4.39253L6.58687 8.56878L5.25874 7.24066C5.14344 7.12127 5.00551 7.02604 4.853 6.96053C4.7005 6.89502 4.53647 6.86054 4.3705 6.85909C4.20452 6.85765 4.03992 6.88928 3.8863 6.95213C3.73268 7.01498 3.59312 7.1078 3.47575 7.22516C3.35839 7.34253 3.26557 7.48209 3.20272 7.63571C3.13987 7.78933 3.10824 7.95393 3.10968 8.11991C3.11112 8.28588 3.14561 8.44991 3.21112 8.60241C3.27663 8.75492 3.37186 8.89285 3.49124 9.00816L5.99125 11.5082C6.2275 11.745 6.54624 11.875 6.87499 11.875L7.04812 11.8625C7.23971 11.8357 7.42247 11.7648 7.58201 11.6554C7.74154 11.546 7.8735 11.401 7.96749 11.2319L11.0925 5.60691C11.1723 5.46344 11.223 5.30566 11.2418 5.14258C11.2606 4.9795 11.2471 4.81432 11.2021 4.65645C11.1571 4.49859 11.0814 4.35115 10.9793 4.22254C10.8773 4.09393 10.751 3.98668 10.6075 3.90691Z",fill:"#A3F7BF"},null,-1))),_hoisted_42=[_hoisted_41];var script = defineComponent({__name:"CreatePost",setup(e){const t=ref(""),o=ref(!1),i=ref(!1),l=ref(0),a=ref(0),_=usePostsApi(),d=useRouter();function s(e){l.value=e,i.value=!1;}let n;function r(){clearTimeout(n),n=setTimeout((()=>function(){if(t.value.length<5)return;fetch("https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key=AIzaSyBF3kMu0WRaEoIDa00MACOK1W7otGDubCY",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:{text:t.value},requestedAttributes:{TOXICITY:{}}})}).then((e=>e.json())).then((e=>{e.attributeScores?.TOXICITY?.summaryScore?.value&&(a.value=e.attributeScores.TOXICITY.summaryScore.value);}));}()),1500);}let c="4";function h(e){"fontSize"===e?(c="3"===c?"4":"3",document.execCommand(e,!1,c)):document.execCommand(e);}return (e,n)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(script$1),createElementVNode("div",_hoisted_1,[_hoisted_2,_hoisted_3,createElementVNode("div",_hoisted_4,[_hoisted_5,createElementVNode("button",{onClick:n[0]||(n[0]=e=>o.value=!o.value),style:normalizeStyle({backgroundColor:o.value?"var(--c-indigo)":"transparent",transition:"all 0.5s ease-out"})},[..._hoisted_7],4),withDirectives(createVNode(Transition,{name:"slide-down"},{default:withCtx((()=>[createElementVNode("div",_hoisted_8,[createElementVNode("button",{onClick:n[1]||(n[1]=e=>h("fontSize"))},[..._hoisted_10]),createElementVNode("button",{onClick:n[2]||(n[2]=e=>h("bold"))},[..._hoisted_12]),createElementVNode("button",{onClick:n[3]||(n[3]=e=>h("italic"))},[..._hoisted_14]),_hoisted_15])])),_:1},512),[[vShow,o.value]])]),n[4]||(setBlockTracking(-1),n[4]=createElementVNode("div",{contenteditable:"",class:"post-input",onInput:o=>{r(),t.value=e.$sanitize(o.target.innerHTML);},placeholder:"Write something..."},null,40,["onInput"]),setBlockTracking(1),n[4]),createElementVNode("p",{style:normalizeStyle({color:"var(--c-divider-dark-1)"})},toDisplayString(t.value.length)+"/300 ",5),withDirectives(createElementVNode("div",null,[createElementVNode("meter",{max:"1",value:a.value,class:"toxicity-level"},"90%",8,_hoisted_16),_hoisted_17],512),[[vShow,t.value.length>5&&a.value>.85]]),createElementVNode("div",_hoisted_18,[createElementVNode("div",null,[_hoisted_19,createElementVNode("button",{class:"options-btn",onClick:n[5]||(n[5]=e=>i.value=!i.value)},[_hoisted_20,createTextVNode(" Visibility "),createElementVNode("span",_hoisted_21,toDisplayString(0==l.value?"Everyone":1==l.value?"Followers":2==l.value?"Following":"Selected"),1)])]),withDirectives(createVNode(Transition,{name:"visibility-fadein"},{default:withCtx((()=>[createElementVNode("div",_hoisted_22,[createElementVNode("button",{onClick:n[6]||(n[6]=e=>s(0))},[_hoisted_23,_hoisted_24,withDirectives((openBlock(),createElementBlock("svg",_hoisted_25,[..._hoisted_27],512)),[[vShow,0==l.value]])]),createElementVNode("button",{onClick:n[7]||(n[7]=e=>s(1))},[_hoisted_28,_hoisted_29,withDirectives((openBlock(),createElementBlock("svg",_hoisted_30,[..._hoisted_32],512)),[[vShow,1==l.value]])]),createElementVNode("button",{onClick:n[8]||(n[8]=e=>s(2))},[_hoisted_33,_hoisted_34,withDirectives((openBlock(),createElementBlock("svg",_hoisted_35,[..._hoisted_37],512)),[[vShow,2==l.value]])]),createElementVNode("button",{onClick:n[9]||(n[9]=e=>s(3))},[_hoisted_38,_hoisted_39,withDirectives((openBlock(),createElementBlock("svg",_hoisted_40,[..._hoisted_42],512)),[[vShow,3==l.value]])])])])),_:1},512),[[vShow,i.value]]),createElementVNode("button",{class:"btn-primary btn-share",onClick:n[10]||(n[10]=e=>{a.value>.95?alert("Please reduce toxicity or violence in your post to make it suitable for readers"):_.translatePost(encodeURIComponent(t.value)).then((e=>{e&&_.createPost(t.value,e.lang,e.text).then((e=>{201===e&&d.push("/");}));}));})}," Share ")])])],64))}});
var css_248z="\n.post-input[data-v-b2d47914]:empty:not(:focus):before{\n  content:attr(placeholder);\n  color:grey;\n}\n.post-input[data-v-b2d47914] {\n    background-color: transparent;\n    border: 0px;\n    font-size: 18px;\n    border-bottom: 2px solid var(--c-divider-dark-1);\n    color: white;\n    width: 100%;\n    height: 30vh;\n    margin-top: 20px;\n    padding-right: 12%;\n    resize: none;\n}\n.post-input[data-v-b2d47914]:focus {\n    outline: none;\n}\n.btn-share[data-v-b2d47914] {\n    position: absolute;\n    right: 20px;\n}\n.post-options-1[data-v-b2d47914] {\n    position: absolute;\n    right: 20px;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-flex-direction: column;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.post-options-1 > button[data-v-b2d47914] {\n    margin-bottom: 10px;\n    background-color: transparent;\n    border: 0px;\n    border-radius: 50%;\n    padding: 8px;\n    padding-bottom: 3px;\n    cursor: pointer;\n    z-index: 10;\n}\n.post-options-1 > button[data-v-b2d47914]:active {\n    background-color: var(--c-black-mute);\n}\n.options-btn[data-v-b2d47914] {\n    background-color: transparent;\n    border: 0px;\n    color: white;\n    padding: 5px;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center;\n    font-size: 16px;\n    margin-bottom: 5px;\n    cursor: pointer;\n}\n.options-btn svg[data-v-b2d47914] {\n    margin-right: 10px;\n}\n.slide-down-enter-active[data-v-b2d47914],\n.slide-down-leave-active[data-v-b2d47914] {\n  -webkit-transform-origin: top;\n          transform-origin: top;\n  transition: -webkit-transform 0.3s cubic-bezier(0.215, 0.610, 0.355, 1.000);\n  transition: transform 0.3s cubic-bezier(0.215, 0.610, 0.355, 1.000);\n  transition: transform 0.3s cubic-bezier(0.215, 0.610, 0.355, 1.000), -webkit-transform 0.3s cubic-bezier(0.215, 0.610, 0.355, 1.000);\n}\n.slide-down-enter-to[data-v-b2d47914],\n.slide-down-leave-from[data-v-b2d47914] {\n  -webkit-transform: scaleY(1);\n          transform: scaleY(1);\n}\n.slide-down-enter-from[data-v-b2d47914],\n.slide-down-leave-to[data-v-b2d47914] {\n  -webkit-transform: scaleY(0);\n          transform: scaleY(0);\n}\n.visibility-fadein-enter-to[data-v-b2d47914],\n.visibility-fadein-leave-from[data-v-b2d47914] {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n    transition: 0.2s ease;\n}\n.visibility-fadein-enter-from[data-v-b2d47914],\n.visibility-fadein-leave-to[data-v-b2d47914] {\n    -webkit-transform: scale(0);\n            transform: scale(0);\n    transition: 0.2s ease;\n}\n.active-format-option[data-v-b2d47914] {\n    background-color: var(--c-indigo);\n    transition: all 0.3s ease;\n}\n.format-options[data-v-b2d47914] {\n    margin-top: -50px;\n    padding-top: 50px;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-flex-direction: column;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-justify-content: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    background-color: var(--c-divider-dark-1);\n    border-radius: 20px;\n    padding-bottom: 5px;\n}\n.format-options > button[data-v-b2d47914] {\n    background: transparent;\n    border: none;\n    color: var(--c-primary);\n    margin-bottom: 7px;\n    cursor: pointer;\n}\n.toxicity-msg[data-v-b2d47914] {\n    color: #E74C3C;\n}\nmeter[data-v-b2d47914] {\n    background: #E74C3C55;\n    border-radius: 20px;\n    width: 100%;\n    height: 7px;\n    margin-top: 20px;\n    border-color: transparent;\n}\nmeter[data-v-b2d47914]::-webkit-meter-bar {\n    background: #E74C3CCC;\n    border-radius: 20px;\n}\nmeter[data-v-b2d47914]::-moz-meter-bar{\n    background: #E74C3C;\n    border-radius: 20px;\n    -moz-transition: width 0.5s ease;\n    transition: width 0.5s ease;\n}\nmeter[data-v-b2d47914]::-webkit-meter-optimum-value {\n    background: #E74C3C;\n    border-radius: 20px;\n    -webkit-transition: width 0.5 ease;\n    transition: width 0.5 ease;\n}\n.toxicity-level[data-v-b2d47914]::-webkit-meter-optimum-value {\n    color: blue;\n}\n.visibility-options[data-v-b2d47914] {\n    position: absolute;\n    margin-top: 80px;\n    background-color: var(--c-black-mute);\n    border: 2px solid var(--c-divider-dark-1); \n    border-radius: 10px;\n    max-width: 80%;\n    box-shadow:  3px 3px 10px #000,\n             0px 0px 0px #000;\n    overflow: hidden;\n}\n.visibility-options > button[data-v-b2d47914] {\n    background: transparent;\n    border: none;\n    color: white;\n    text-align: left;\n    padding: 15px;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    cursor: pointer;\n    width: 100%;\n}\n.visibility-options > button[data-v-b2d47914]:hover {\n    background: #1e1e1e;\n}\n.visibility-options > button > svg[data-v-b2d47914] {\n    float: right;\n    margin-top: -30px;\n}\n.visibility-desc[data-v-b2d47914] {\n    font-size: 15px;\n    color: #ababab;\n    margin-top: 2px;\n}\n";styleInject(css_248z);script.__scopeId="data-v-b2d47914",script.__file="src/views/CreatePost.vue";export{script as default};